{"version":3,"sources":["webpack:///./js/index.js","webpack:///./style/css/_root.scss","webpack:///./js/home.js","webpack:///./js/product.js","webpack:///./js/helper/image.js","webpack:///./js/helper/form.js","webpack:///./js/basket.js","webpack:///./js/cart.js","webpack:///./js/ordering.js","webpack:///./js/header-nav.js","webpack:///./js/header-search.js","webpack:///./js/my-lib/search.js","webpack:///./js/my-lib/screen.js","webpack:///./js/category.js","webpack:///./js/category-menu.js","webpack:///../node_modules/classnames/index.js","webpack:///./js/component/product-preview.js","webpack:///./js/authorization.js","webpack:///./js/search-page.js"],"names":["require","window","app","FastClick","$","homeScripts","productScripts","authorizationScripts","basketScripts","cartScripts","orderingScripts","headerScripts","headerSearchScripts","searchPageScripts","categoryPageScripts","categoryMenuScripts","document","body","initHeaderNav","initHeaderSearch","initSwiper","initCategories","initCategoryMenu","productReview","initBreadCrumbs","initSwiperZoom","initAddToBasketForm","initAuthorizationForm","initBasket","initCartTable","initOrderForm","initPage","Swiper","ProductPreview","module","exports","cssInitialClass","removeClass","onSwiperResize","swiper","slideHeight","slideWidth","width","documentElement","clientWidth","neededHeight","Math","min","round","neededHeightPx","$wrapperEl","$el","slides","nodes","concat","forEach","node","css","height","homeSwiper","pagination","el","clickable","on","init","resize","autoplay","delay","disableOnInteraction","loop","console","log","evt","preventDefault","React","Component","ReactDOM","Categories","view","categoryTree","state","JSON","parse","stringify","categories","map","category","ii","Category","attr","listItemLimit","products","props","fetch","slice","join","then","data","json","setState","makeSwiper","catch","getProducts","slug","slidesPerView","freeMode","name","displayName","visibleCategoryName","product","PromoCategory","wrapper","querySelector","render","loadImages","productSwiperImages","productSwiperWrapper","length","addClass","Array","prototype","call","src","maxHeightImage","images","sort","image0","image1","size","productSwiper","win","fullPageClassName","onWindowResize","hasClass","toggleClass","dispatchEvent","Event","form","basket","change","Number","find","val","snackbar","content","style","timeout","hasCategoryTheProduct","productId","indexOf","findProductPath","passList","callBack","watcher","currentPassList","push","hasResult","shift","Object","assign","some","subCategory","getCategoriesPath","resultObject","result","categoriesPass","_id","error","categoryHtml","replace","productHtml","innerHTML","loadImage","Promise","resolve","reject","image","Image","onLoad","onload","onerror","onError","imageSrcList","all","checkInput","input","value","hasAttribute","pattern","getAttribute","regExp","RegExp","test","checkForm","inputs","every","Basket","counter","postfix","empty","numberToMoney","CartTable","items","getItems","newCount","set","backgroundImage","article","count","onInputNumberBlur","onInputChange","parseInt","currentTarget","price","getFullPrice","history","back","showError","createOrder","serializedForm","serializeToJSON","basketItems","ajax","type","url","success","hasOwnProperty","updateUserData","serialize","orderingForm","clear","location","href","narrowWidth","TabContent","HeaderNav","filter","order","activeCategorySlug","isNarrow","nextProps","nextState","nextIsNarrow","closeTabs","classList","remove","add","bindEvents","onResize","addEventListener","newSlug","activeCategory","category1","category2","switchTab","narrowRender","openTab","classnames","normalizeString","SearchPage","HeaderSearch","query","isInProgress","hasFocus","description","__html","searchInput","refs","searchIconClassName","onFormSubmit","onSearchInput","setTimeout","renderList","emptyQuery","promiseCache","search","rawResult","sortProduct","product1","product2","delta","scrollMethods","docElem","scrollTop","saveScrollTop","restoreScrollTop","hasCategoryTheCategory","findCategoryPath","categorySlug","CategoryMenuItem","isOpen","visibleName","childCategory","CategoryMenu","promotable","getUrlQuery","id","redirect","referrer","origin","click","decodeURI","searchResult","focus"],"mappings":"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","file":"main.js","sourcesContent":["/* global document */\n\n// polyfill\nrequire('./lib/polyfill/es5-shim');\nrequire('./lib/polyfill/es5-sham');\nrequire('./lib/polyfill/json3');\nrequire('./lib/polyfill/es6-shim');\nrequire('./lib/polyfill/es6-sham.min');\nrequire('./lib/polyfill/es7-shim');\n\nrequire('./../style/css/_root.scss');\n\nwindow.app = window.app || {};\n\nconst FastClick = require('fastclick');\nconst $ = require('jquery');\n\nconst homeScripts = require('./home');\nconst productScripts = require('./product');\nconst authorizationScripts = require('./authorization');\nconst basketScripts = require('./basket');\nconst cartScripts = require('./cart');\nconst orderingScripts = require('./ordering');\n// const orderScripts = require('./order');\nconst headerScripts = require('./header-nav');\nconst headerSearchScripts = require('./header-search');\nconst searchPageScripts = require('./search-page');\nconst categoryPageScripts = require('./category');\nconst categoryMenuScripts = require('./category-menu');\n\n$(() => {\n    // main part\n    new FastClick(document.body); // eslint-disable-line no-new\n\n    // main scripts\n    headerScripts.initHeaderNav();\n\n    // search\n    headerSearchScripts.initHeaderSearch();\n\n    // home\n    homeScripts.initSwiper();\n    homeScripts.initCategories();\n    categoryMenuScripts.initCategoryMenu();\n\n    // homeScripts.initPagination();\n    homeScripts.productReview();\n\n    // product\n    productScripts.initSwiper();\n    productScripts.initBreadCrumbs();\n    productScripts.initSwiperZoom();\n    productScripts.initAddToBasketForm();\n\n    // authorization\n    authorizationScripts.initAuthorizationForm();\n\n    // basket\n    basketScripts.initBasket();\n\n    // cart\n    cartScripts.initCartTable();\n\n    // ordering\n    orderingScripts.initOrderForm();\n\n    // order\n    // orderScripts.initOrderTable();\n    // orderScripts.initPdfOrder();\n\n    // categories\n    categoryPageScripts.initBreadCrumbs();\n\n    // search\n    searchPageScripts.initPage();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/index.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./style/css/_root.scss\n// module id = 176\n// module chunks = 0","/* global document, fetch */\nconst Swiper = require('./lib/swiper');\nconst $ = require('jquery');\nconst {ProductPreview} = require('./component/product-preview');\n\nmodule.exports.initSwiper = () => {\n    const cssInitialClass = 'home-swiper-wrapper--wait-for-init';\n\n    $('.' + cssInitialClass).removeClass(cssInitialClass);\n\n    function onSwiperResize() {\n        // count height\n        // const slideHeight = 261;\n        // const slideWidth = 980;\n        const swiper = this; // eslint-disable-line no-invalid-this\n        const slideHeight = 325;\n        const slideWidth = 1220;\n        const width = document.documentElement.clientWidth;\n        const neededHeight = Math.min(Math.round(slideHeight * width / slideWidth), slideHeight);\n        const neededHeightPx = neededHeight + 'px';\n\n        // get nodes\n        const {$wrapperEl, $el, slides} = swiper;\n        const nodes = [$wrapperEl, $el].concat(slides);\n\n        nodes.forEach(node => node.css({height: neededHeightPx}));\n    }\n\n    const homeSwiper = new Swiper('.js-home-swiper-wrapper', {\n        pagination: {\n            el: '.js-home-swiper-wrapper .swiper-pagination', // eslint-disable-line id-length\n            clickable: true\n        },\n        on: { // eslint-disable-line id-length\n            init: onSwiperResize,\n            resize: onSwiperResize\n        },\n        // nextButton: '.swiper-button-next',\n        // prevButton: '.swiper-button-prev',\n        // paginationClickable: true,\n        // spaceBetween: 30,\n        // centeredSlides: true,\n        autoplay: {\n            delay: 6000,\n            disableOnInteraction: false\n        },\n        loop: true\n        // onInit: onSwiperResize,\n        // onAfterResize: onSwiperResize\n    });\n\n    console.log('home swiper is here ->', homeSwiper);\n};\n\n/*\nmodule.exports.initPagination = () => {\n    const {indexPagination} = window.app;\n\n    if (!indexPagination) {\n        console.log('no app.indexPagination');\n        return;\n    }\n\n    const {totalPages, startPage} = indexPagination;\n    const {location} = window;\n\n    const paginationWrapper = $('.js-index-pagination');\n\n    if (totalPages === 1) {\n        paginationWrapper.remove();\n        return;\n    }\n\n    paginationWrapper.twbsPagination({\n        totalPages,\n        startPage,\n\n        initiateStartPageClick: false,\n        visiblePages: 5,\n\n        prev: '&#8672;',\n        next: '&#8674;',\n\n        first: '&#8676;',\n        last: '&#8677;',\n\n        onPageClick: (evt, page) => Object.assign(location, {search: 'page=' + page})\n    });\n};\n*/\n\nmodule.exports.productReview = () => {\n    $('.js-product-preview').on('contextmenu', evt => evt.preventDefault());\n};\n\n\nconst React = require('react');\nconst {Component} = React;\nconst ReactDOM = require('react-dom');\n\nclass Categories extends Component {\n    constructor() {\n        super();\n\n        const view = this;\n        const {app} = window;\n        const {categoryTree} = app;\n\n        view.state = {\n            categoryTree: JSON.parse(JSON.stringify(categoryTree))\n        };\n    }\n\n    render() {\n        const view = this;\n        const {state} = view;\n        const {categoryTree} = state;\n        const {categories} = categoryTree;\n\n        return [\n            <PromoCategory key=\"promo-category\"/>,\n            categories.map((category, ii) => <Category key={ii} category={category}/>)\n        ];\n    }\n}\n\nclass Category extends Component {\n    attr = {\n        swiper: null,\n        listItemLimit: 10\n    }\n\n    constructor() {\n        super();\n\n        const view = this;\n\n        view.state = {\n            products: []\n        };\n    }\n\n    getProducts() {\n        const view = this;\n        const {props} = view;\n        const {category} = props;\n\n        fetch('/api/get-products-by-ids/' + category.products.slice(0, view.attr.listItemLimit).join(';'))\n            .then(data => data.json())\n            .then(({products}) => view.setState({products}, () => view.makeSwiper()))\n            .catch(() => console.log('can not get product from /api/get-products-by-ids/'));\n    }\n\n    componentDidMount() {\n        const view = this;\n\n        view.getProducts();\n    }\n\n    makeSwiper() {\n        const view = this;\n        const {props} = view;\n        const {category} = props;\n\n        view.attr.swiper = new Swiper('.js-category-swiper-container--' + category.slug, {\n            slidesPerView: 'auto',\n            freeMode: true\n        });\n    }\n\n    render() {\n        const view = this;\n        const {props, state} = view;\n        const {products} = state;\n        const {category} = props;\n        const {name, displayName} = category;\n        const visibleCategoryName = displayName || name;\n\n        // TODO: fix several <br />\n\n        return [\n            <a key=\"category-header\"\n                href={'/category/' + category.slug}\n                className=\"category-row__header\">\n                {visibleCategoryName}\n            </a>,\n            <div key=\"category-content\"\n                className={\n                    'swiper-container category-swiper-container js-category-swiper-container--' + category.slug\n                }>\n                <div className=\"swiper-wrapper\">\n                    {products.map(product =>\n                        <div key={product.slug} className=\"swiper-slide\">\n                            <ProductPreview key={product.slug} product={product}/>\n                        </div>\n                    )}\n                    <div className=\"swiper-slide\">\n                        <a href={'/category/' + category.slug} className=\"product-preview\">\n                            <div className=\"product-preview__image product-preview__image--go-to-category\"/>\n                            <h3 className=\"product-preview__name\">{visibleCategoryName}</h3>\n                            <div className=\"product-preview__description ta-center\">\n                                <br/>\n                                <br/>\n                                <br/>\n                                <br/>\n                                <br/>\n                                <h1>Перейти в категорию</h1>\n                            </div>\n                        </a>\n                    </div>\n                </div>\n            </div>];\n    }\n}\n\nclass PromoCategory extends Category {\n    constructor() {\n        super();\n\n        const view = this;\n\n        view.state = {\n            products: []\n        };\n    }\n\n    getProducts() {\n        const view = this;\n\n        fetch('/api/get-promo-products/')\n            .then(data => data.json())\n            .then(({products}) => view.setState({products}, () => view.makeSwiper()));\n    }\n\n    componentDidMount() {\n        const view = this;\n\n        view.getProducts();\n    }\n\n    makeSwiper() {\n        const view = this;\n\n        view.attr.swiper = new Swiper('.js-category-swiper-container--promo-product', {\n            slidesPerView: 'auto',\n            freeMode: true\n        });\n    }\n\n    render() {\n        const view = this;\n        const {state} = view;\n        const {products} = state;\n\n        // TODO: fix several <br />\n        return [\n            <a key=\"category-header\"\n                href=\"/promo-products\"\n                className=\"category-row__header\">Промо товары</a>,\n            <div key=\"category-content\"\n                className={'swiper-container category-swiper-container js-category-swiper-container--promo-product'}>\n                <div className=\"swiper-wrapper\">\n                    {products.map(product =>\n                        <div key={product.slug} className=\"swiper-slide\">\n                            <ProductPreview key={product.slug} product={product}/>\n                        </div>\n                    )}\n                    <div className=\"swiper-slide\">\n                        <a href=\"/promo-products\"\n                            className=\"product-preview\">\n                            <div className=\"product-preview__image product-preview__image--promo-preview-image\"/>\n                            <h3 className=\"product-preview__name\">Промо товары</h3>\n                            <div className=\"product-preview__description ta-center\">\n                                <br/>\n                                <br/>\n                                <br/>\n                                <br/>\n                                <h1>Перейти в промо товары</h1>\n                            </div>\n                        </a>\n                    </div>\n                </div>\n            </div>];\n    }\n}\n\nmodule.exports.initCategories = () => {\n    const wrapper = document.querySelector('.js-category-list-wrapper');\n    const {categoryTree} = window.app;\n\n    if (!wrapper || !categoryTree) {\n        return;\n    }\n\n    ReactDOM.render(\n        <Categories/>,\n        wrapper\n    );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/home.js","/* global document, Event */\nconst Swiper = require('./lib/swiper');\nconst $ = require('jquery');\n\nconst {loadImages} = require('./helper/image');\n\nmodule.exports.initSwiper = () => {\n    const productSwiperImages = $('.js-product-swiper-img');\n    const productSwiperWrapper = $('.js-product-swiper-wrapper');\n\n    if (productSwiperImages.length <= 1) {\n        productSwiperWrapper.addClass('product-swiper-wrapper--one-image');\n        console.log('no product swiper, here is one image');\n        return;\n    }\n\n    loadImages(Array.prototype.slice.call(productSwiperImages).map(({src}) => src)) // eslint-disable-line prefer-reflect\n        .then(images => {\n            const maxHeightImage = images.sort((image0, image1) => image1.height - image0.height)[0];\n\n            function onSwiperResize() {\n                const swiper = this; // eslint-disable-line no-invalid-this\n                const {$wrapperEl, $el, slides} = swiper;\n                const size = Math.min(maxHeightImage.height, $el[0].clientWidth) + 'px';\n                const nodes = [$wrapperEl, $el].concat(slides);\n\n                nodes.forEach(node => node.css({height: size}));\n            }\n\n            const productSwiper = new Swiper(productSwiperWrapper[0], {\n                pagination: {\n                    el: '.swiper-pagination', // eslint-disable-line id-length\n                    clickable: true\n                },\n                on: { // eslint-disable-line id-length\n                    init: onSwiperResize,\n                    resize: onSwiperResize\n                },\n                autoplay: {\n                    delay: 6000,\n                    disableOnInteraction: false\n                },\n                loop: true\n            });\n\n            console.log('product swiper is here ->', productSwiper);\n        });\n};\n\nmodule.exports.initSwiperZoom = () => {\n    const product = $('.js-product');\n    const win = window;\n    const fullPageClassName = 'product--full-page';\n\n    function onWindowResize() {\n        if (product.hasClass(fullPageClassName)) {\n            return;\n        }\n\n        if (win.document.documentElement.clientWidth < 980) {\n            product.addClass(fullPageClassName);\n            return;\n        }\n\n        product.removeClass(fullPageClassName);\n    }\n\n    onWindowResize();\n\n    $(win).on('resize', onWindowResize);\n\n    $('.js-product-swiper-wrapper').on('dblclick', () => {\n        product.toggleClass(fullPageClassName);\n        win.dispatchEvent(new Event('resize'));\n    });\n};\n\nmodule.exports.initAddToBasketForm = () => {\n    const win = window;\n\n    win.app = win.app || {};\n\n    const {app} = win;\n    const {product = null} = app;\n\n    if (!product) {\n        console.log('no add to basket form');\n        return;\n    }\n\n    const form = $('.js-add-to-basket-form');\n\n    form.on('submit', evt => {\n        evt.preventDefault();\n\n        const {basket} = app;\n\n        basket.change(product, Number(form.find('.js-count').val()));\n\n        $.snackbar({\n            content: 'Товар добавлен в корзину!', // text of the snackbar\n            style: 'snackbar', // add a custom class to your snackbar\n            timeout: 3e3// time in milliseconds after the snackbar autohides, 0 is disabled\n        });\n    });\n};\n\nfunction hasCategoryTheProduct(category, productId) {\n    return category.products.indexOf(productId) !== -1;\n}\n\nfunction findProductPath(category, productId, passList, callBack, watcher) {\n    const currentPassList = JSON.parse(JSON.stringify(passList));\n    const {slug, name, displayName} = category;\n\n    currentPassList.push({slug, name, displayName});\n\n    if (hasCategoryTheProduct(category, productId) && watcher.hasResult === false) {\n        currentPassList.shift();\n        callBack(currentPassList);\n        Object.assign(watcher, {hasResult: true});\n        return true; // stop outside loop\n    }\n\n    category\n        .categories\n        .some(subCategory => findProductPath(subCategory, productId, currentPassList, callBack, watcher));\n\n    // check for top category and for no result\n    if (currentPassList.length === 1 && watcher.hasResult === false) {\n        callBack(null);\n    }\n\n    return false; // continue outside loop\n}\n\nfunction getCategoriesPath(productId) {\n    const {app} = window;\n    const categoryTree = JSON.parse(JSON.stringify(app.categoryTree));\n    const resultObject = {};\n\n    findProductPath(categoryTree, productId, [], result => Object.assign(resultObject, {result}), {hasResult: false});\n\n    return resultObject.result;\n}\n\nmodule.exports.initBreadCrumbs = () => {\n    const wrapper = document.querySelector('.js-bread-crumbs');\n\n    if (!wrapper) {\n        console.log('no wrapper for bread-crumbs');\n        return;\n    }\n\n    const {app} = window;\n    const product = JSON.parse(JSON.stringify(app.product));\n\n    const categoriesPass = getCategoriesPath(product._id); // eslint-disable-line no-underscore-dangle\n\n    if (categoriesPass === null) {\n        console.error('Can NOT create bread crumbs for product');\n        return;\n    }\n\n    const categoryHtml = categoriesPass\n        .map(({slug, name, displayName}) =>\n            '<a class=\"bread-crumbs__link\" href=\"{{href}}\">{{name}}</a>'\n                .replace('{{href}}', '/category/' + slug)\n                .replace('{{name}}', displayName || name) +\n            '<span class=\"bread-crumbs__separator\">&gt;</span>'\n        )\n        .join('');\n\n    const productHtml = '<a class=\"bread-crumbs__link secondary-color\" href=\"{{href}}\">{{name}}</a>'\n        .replace('{{href}}', '/product/' + product.slug)\n        .replace('{{name}}', product.displayName || product.name);\n\n    wrapper.innerHTML = categoryHtml + productHtml;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/product.js","/* global Image */\n\nfunction loadImage(src) {\n    return new Promise((resolve, reject) => {\n        const image = new Image();\n\n        function onLoad() {\n            image.onload = image.onerror = null;\n            resolve(image);\n        }\n\n        function onError() {\n            image.onload = image.onerror = null;\n            reject(image);\n        }\n\n        image.onload = onLoad;\n        image.onerror = onError;\n\n        image.src = src;\n    });\n}\n\nfunction loadImages(imageSrcList) {\n    return Promise.all(imageSrcList.map(loadImage));\n}\n\nmodule.exports.loadImage = loadImage;\nmodule.exports.loadImages = loadImages;\n\n\n\n// WEBPACK FOOTER //\n// ./js/helper/image.js","function checkInput(input) {\n    const {value} = input;\n\n    if (input.hasAttribute('required') && !value) {\n        return false;\n    }\n\n    const pattern = input.getAttribute('pattern');\n\n    if (!pattern) {\n        return true;\n    }\n\n    const regExp = new RegExp(pattern);\n\n    return regExp.test(value);\n}\n\nfunction checkForm(form) {\n    const inputs = Array.prototype.slice.call(form.find('input')); // eslint-disable-line prefer-reflect\n\n    return inputs.every(checkInput);\n}\n\nmodule.exports.checkInput = checkInput;\nmodule.exports.checkForm = checkForm;\n\n\n\n// WEBPACK FOOTER //\n// ./js/helper/form.js","const $ = require('jquery');\nconst Basket = require('./my-lib/basket');\n\nmodule.exports.initBasket = () => {\n    const basket = new Basket({\n        wrapper: $('.js-cart')[0],\n        counter: $('.js-counter')[0],\n        postfix: ' руб.',\n        empty: 'Нет товаров'\n    });\n\n    const win = window;\n\n    win.app = win.app || {};\n    win.app.basket = basket;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/basket.js","/* global document, history*/\nconst React = require('react');\nconst {Component} = React;\nconst ReactDOM = require('react-dom');\nconst {numberToMoney} = require('./my-lib/format');\n\nwindow.app = window.app || {};\n\nclass CartTable extends Component {\n    constructor() {\n        super();\n\n        const view = this;\n        const {app} = window;\n        const {basket} = app;\n\n        view.state = {\n            items: basket.getItems()\n        };\n    }\n\n    onInputChange(slug, newCount) {\n        const view = this;\n        const {app} = window;\n        const {basket} = app;\n\n        basket.set({slug}, newCount);\n        view.setState({\n            items: basket.getItems()\n        });\n    }\n\n    render() {\n        const view = this;\n        const {state} = view;\n        const {items} = state;\n\n        if (items.length === 0) {\n            return <h2 className=\"page-header\">Корзина пуста</h2>;\n        }\n\n        return <div>\n            <div className=\"cart\">\n                <table className=\"table\">\n                    <thead className=\"table__head\">\n                        <tr>\n                            <th className=\"table__th\">№</th>\n                            <th className=\"table__th\">Наименование товара</th>\n                            <th className=\"table__th\">Кол-во</th>\n                            <th className=\"table__th\">Цена (руб.)</th>\n                            <th className=\"table__th\">Сумма (руб.)</th>\n                            <th className=\"table__th\"/>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {items.map((product, ii) => <tr className=\"table__tr\" key={ii}>\n                            <td className=\"table__td table__td--ta-center\">{ii + 1}</td>\n                            <td className=\"table__td\">\n                                <div className=\"table__product-image\"\n                                    style={{backgroundImage: 'url(' + product.images[0] + ')'}}/>\n                                <a href={'/product/' + product.slug} className=\"table__product-name\">{product.name}</a>\n                                <p className=\"table__product-article\">Артикул: {product.article}</p>\n                            </td>\n                            <td className=\"table__td\">\n                                <input\n                                    className=\"input input--number block-center\"\n                                    type=\"number\"\n                                    min=\"1\"\n                                    defaultValue={product.count}\n                                    onBlur={onInputNumberBlur}\n                                    onChange={evt =>\n                                        view.onInputChange(product.slug, parseInt(evt.currentTarget.value, 10) || 1)}\n                                    required/>\n                            </td>\n                            <td className=\"table__td table__td--ta-right\">\n                                <span className=\"table__number\">\n                                    {numberToMoney(product.price)}\n                                </span>\n                            </td>\n                            <td className=\"table__td table__td--ta-right\">\n                                <span className=\"table__number\">\n                                    {numberToMoney(product.count * product.price)}\n                                </span>\n                            </td>\n                            <td className=\"table__td\">\n                                <span onClick={evt => view.onInputChange(product.slug, 0)} className=\"table__close\"/>\n                            </td>\n                        </tr>)}\n                        <tr>\n                            <td colSpan=\"3\">\n                                <span className=\"table__number bold\">\n                                Итого:\n                                </span>\n                            </td>\n                            <td colSpan=\"2\">\n                                <span className=\"table__number table__number--left bold\">\n                                    {numberToMoney(window.app.basket.getFullPrice())} руб.\n                                </span>\n                            </td>\n                            <td/>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div className=\"buttons-wrapper\">\n                <button className=\"button\" onClick={() => history.back()}>продолжить покупки</button>\n                <a href=\"/ordering\" className=\"button\">оформить заказ</a>\n            </div>\n        </div>;\n    }\n}\n\nfunction onInputNumberBlur(evt) {\n    const input = evt.currentTarget;\n    const value = parseInt(input.value, 10) || 0;\n\n    if (value <= 0) {\n        input.value = 1;\n    }\n}\n\nmodule.exports.initCartTable = () => {\n    const wrapper = document.querySelector('.js-table-cart');\n\n    if (!wrapper) {\n        return;\n    }\n\n    ReactDOM.render(\n        <CartTable/>,\n        wrapper\n    );\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./js/cart.js","/* global location */\nconst $ = require('jquery');\nconst {showError} = require('./authorization');\n\nfunction createOrder(form) {\n    return new Promise((resolve, reject) => {\n        const serializedForm = form.serializeToJSON();\n        const basketItems = window.app.basket.getItems();\n        const products = basketItems\n            .map(({slug, name, count}) => JSON.stringify({slug, name, count})\n                .replace(/\":/g, '\": ')\n                .replace(/^{|}$/g, '')\n                .replace(/\",\\s?\"/g, '\"; \"')\n                .replace(/\"([\\S\\s]+?)\"/g, '$1')\n            );\n\n        $.ajax({\n            type: 'post',\n            url: '/api/create-order',\n            data: {\n                ...serializedForm,\n                products,\n                basketItems: JSON.stringify(basketItems)\n            }, // serializes the form's elements.\n            success: data => data.hasOwnProperty('error') ?\n                reject(data) :\n                resolve(data)\n        });\n    });\n}\n\nfunction updateUserData(form) {\n    return new Promise((resolve, reject) => {\n        $.ajax({\n            type: 'post',\n            url: '/api/update',\n            data: form.serialize(), // serializes the form's elements.\n            success: data => data.hasOwnProperty('error') ?\n                reject(data) :\n                resolve(data)\n        });\n    });\n}\n\nmodule.exports.initOrderForm = () => {\n    const orderingForm = $('.js-ordering-form');\n\n    if (orderingForm.length === 0) {\n        console.log('NO ordering form');\n        return;\n    }\n\n    orderingForm.on('submit', evt => {\n        evt.preventDefault();\n\n        updateUserData(orderingForm)\n            .then(() => createOrder(orderingForm))\n            .then(data => {\n                window.app.basket.clear();\n                Object.assign(location, {href: '/order/' + data.slug + '?header=congratulation'});\n            })\n            .catch(showError);\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/ordering.js","/* global document */\nconst React = require('react');\nconst {Component} = React;\nconst ReactDOM = require('react-dom');\nconst find = require('lodash/find');\n// const {browser} = require('./my-lib/browser');\n\nwindow.app = window.app || {};\n\nconst narrowWidth = 767;\n\nclass TabContent extends Component {\n    render() {\n        const view = this;\n        const {props} = view;\n        const {category} = props;\n        const {categories} = category;\n\n        if (categories.length === 0) {\n            return null;\n        }\n\n        return <div className=\"header-nav__tab-wrapper\">\n            <div className=\"category-item__wrapper clear-self\">\n                {categories.map(({image, displayName, name, slug}) =>\n                    <a key={slug} href={'/category/' + slug} className=\"category-item clear-self\">\n                        <span className=\"category-item__image\" style={{backgroundImage: 'url(' + image + ')'}}/>\n                        <p className=\"category-item__name\">{displayName || name}</p>\n                    </a>)}\n            </div>\n        </div>;\n    }\n}\n\nclass HeaderNav extends Component {\n    constructor() {\n        super();\n\n        const view = this;\n        const {app} = window;\n        const categoryTree = JSON.parse(JSON.stringify(app.categoryTree));\n\n        categoryTree.categories = categoryTree.categories.filter(({order}) => order > 0);\n\n        view.state = {\n            categoryTree,\n            activeCategorySlug: null,\n            isNarrow: false,\n            wrapper: document.querySelector('.js-header-nav')\n        };\n    }\n\n    componentWillUpdate(nextProps, nextState) {\n        const view = this;\n        const {state} = view;\n        const {isNarrow} = state;\n        const nextIsNarrow = nextState.isNarrow;\n\n        if (isNarrow === nextIsNarrow) {\n            return;\n        }\n\n        view.closeTabs();\n    }\n\n    componentDidUpdate() {\n        const view = this;\n        const {state} = view;\n        const {wrapper, isNarrow} = state;\n\n        if (isNarrow) {\n            wrapper.classList.remove('header-nav__sticky');\n        } else {\n            wrapper.classList.add('header-nav__sticky');\n        }\n    }\n\n    componentDidMount() {\n        const view = this;\n\n        view.bindEvents();\n        view.onResize();\n    }\n\n    onResize() {\n        const view = this;\n        const isNarrow = document.documentElement.clientWidth < narrowWidth;\n\n        view.setState({isNarrow});\n    }\n\n    bindEvents() {\n        const view = this;\n\n        window.addEventListener('resize', () => view.onResize(), false);\n    }\n\n    openTab(slug) {\n        const view = this;\n\n        view.setState({activeCategorySlug: slug});\n    }\n\n    closeTabs() {\n        const view = this;\n\n        view.setState({activeCategorySlug: null});\n    }\n\n    switchTab(slug) {\n        const view = this;\n        const {state} = view;\n        const {activeCategorySlug} = state;\n        const newSlug = activeCategorySlug === slug ? null : slug;\n\n        view.setState({activeCategorySlug: newSlug});\n    }\n\n    narrowRender() {\n        const view = this;\n        const {state} = view;\n        const {categoryTree} = state;\n        const activeCategory = find(categoryTree.categories, {slug: state.activeCategorySlug});\n\n        return <div>\n            {categoryTree.categories\n                .sort((category1, category2) => category1.order - category2.order)\n                .map(({displayName, name, slug, categories}) => <div\n                    className=\"header-nav__link header-nav__link--narrow\"\n                    key={slug}>\n                    <a href={'/category/' + slug}\n                        className=\"header-nav__active-element\">\n                        {displayName || name}\n                    </a>\n                    {categories.length === 0 ?\n                        null :\n                        <div className=\"header-nav__switch-button\"\n                            onClick={() => view.switchTab(slug)}>\n                            {activeCategory && activeCategory.slug === slug ? '×' : '+'}\n                        </div>\n                    }\n                    {activeCategory && activeCategory.slug === slug && <TabContent category={activeCategory}/>}\n                </div>)\n            }\n        </div>;\n    }\n\n    render() {\n        const view = this;\n        const {state} = view;\n        const {categoryTree, isNarrow} = state;\n        const activeCategory = find(categoryTree.categories, {slug: state.activeCategorySlug});\n\n        if (isNarrow) {\n            return view.narrowRender();\n        }\n\n        return <div>\n            {categoryTree.categories\n                .sort((category1, category2) => category1.order - category2.order)\n                .map(({displayName, name, slug}) => <div\n                    className=\"header-nav__link\"\n                    onMouseEnter={() => view.openTab(slug)}\n                    onMouseLeave={() => view.closeTabs()}\n                    key={slug}>\n                    <a href={'/category/' + slug}\n                        className=\"header-nav__active-element\">\n                        {displayName || name}\n                    </a>\n                    {activeCategory && activeCategory.slug === slug && <TabContent category={activeCategory}/>}\n                </div>)\n            }\n        </div>;\n    }\n}\n\nmodule.exports.initHeaderNav = () => {\n    const wrapper = document.querySelector('.js-header-nav');\n    const {categoryTree} = window.app;\n\n    if (!wrapper || !categoryTree) {\n        return;\n    }\n\n    ReactDOM.render(\n        <HeaderNav/>,\n        wrapper\n    );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/header-nav.js","/* global document, setTimeout, location */\nconst React = require('react');\nconst ReactDOM = require('react-dom');\nconst classnames = require('classnames');\nconst {normalizeString} = require('./my-lib/format');\nconst {SearchPage} = require('./search-page');\n\nclass HeaderSearch extends SearchPage {\n    constructor() {\n        super();\n\n        const view = this;\n\n        view.state = {\n            query: '',\n            products: [],\n            isInProgress: false,\n            hasFocus: false\n        };\n    }\n\n    renderList() {\n        const view = this;\n        const {state} = view;\n        const {products, hasFocus, query} = state;\n\n        if (!hasFocus || !query) {\n            return null;\n        }\n\n        if (!products.length) {\n            return <div className=\"header-search__result-list header-search__result-list--search-empty\">\n                По запросу<span className=\"bold\"> \"{query}\" </span>ничего не найдено\n            </div>;\n        }\n\n        return <div className=\"header-search__result-list\">\n            {products.map(({slug, name, description, images}) =>\n                <a href={'/product/' + slug} className=\"header-search__result-item clear-full\"\n                    key={slug}>\n                    <div className=\"header-search__result-image\" style={{backgroundImage: 'url(' + images[0] + ')'}}/>\n                    <h4 className=\"header-search__result-name\">{name}</h4>\n                    <p className=\"header-search__result-description\" dangerouslySetInnerHTML={{__html: description}}/>\n                </a>)}\n        </div>;\n    }\n\n    onFormSubmit(evt) {\n        evt.preventDefault();\n\n        const view = this;\n        const {searchInput} = view.refs;\n        const query = normalizeString(searchInput.value);\n\n        Object.assign(location, {href: '/search?query=' + query});\n    }\n\n    render() {\n        const view = this;\n        const {state} = view;\n        const {isInProgress} = state;\n\n        const searchIconClassName = classnames('header-search__icon', {\n            'header-search__icon--in-progress': isInProgress\n        });\n\n        return <form className=\"header-search\" onSubmit={evt => view.onFormSubmit(evt)} ref=\"form\">\n            <input\n                ref=\"searchInput\"\n                className=\"header-search__input\"\n                placeholder=\"Поиск...\"\n                onInput={evt => view.onSearchInput()}\n                onFocus={() => {\n                    view.onSearchInput();\n                    view.setState({hasFocus: true});\n                }}\n                onBlur={() => setTimeout(() => view.setState({hasFocus: false}), 300)}\n            />\n            <div onClick={evt => view.onFormSubmit(evt)} className={searchIconClassName}/>\n            {view.renderList()}\n        </form>;\n    }\n}\n\nmodule.exports.initHeaderSearch = () => {\n    const wrapper = document.querySelector('.js-header-search');\n\n    if (!wrapper) {\n        return;\n    }\n\n    ReactDOM.render(\n        <HeaderSearch/>,\n        wrapper\n    );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/header-search.js","/* global fetch, setTimeout */\n\nconst emptyQuery = '';\n\nconst promiseCache = {\n    [emptyQuery]: Promise.resolve({products: []})\n};\n\nfunction search(query) {\n    if (promiseCache.hasOwnProperty(query)) {\n        return promiseCache[query];\n    }\n\n    promiseCache[query] = fetch('/api/search?query=' + query)\n        .then(rawResult => rawResult.json());\n\n    return promiseCache[query];\n}\n\nmodule.exports.search = search;\n\nfunction sortProduct(products, query) {\n    return products\n        .sort((product1, product2) => {\n            const delta = product1.name.search(new RegExp(query, 'gi')) -\n                product2.name.search(new RegExp(query, 'gi'));\n\n            if (delta) {\n                return delta;\n            }\n\n            return product1.name > product2.name ? 0.5 : -0.5;\n        });\n}\n\nmodule.exports.sortProduct = sortProduct;\n\n\n\n// WEBPACK FOOTER //\n// ./js/my-lib/search.js","/* global document*/\n\nconst scrollMethods = (() => {\n    const docElem = document.documentElement;\n    let {scrollTop = 0} = docElem;\n\n    function saveScrollTop() {\n        console.log('save', docElem.scrollTop);\n        scrollTop = docElem.scrollTop;\n    }\n\n    function restoreScrollTop() {\n        console.log('restore', scrollTop);\n        docElem.scrollTop = scrollTop;\n    }\n\n    return {\n        saveScrollTop,\n        restoreScrollTop\n    };\n})();\n\n\nmodule.exports.saveScrollTop = scrollMethods.saveScrollTop;\nmodule.exports.restoreScrollTop = scrollMethods.restoreScrollTop;\n\n\n\n// WEBPACK FOOTER //\n// ./js/my-lib/screen.js","/* global document */\nfunction hasCategoryTheCategory(category, slug) {\n    return category.categories.some(subCategory => subCategory.slug === slug);\n}\n\nfunction findCategoryPath(category, categorySlug, passList, callBack, watcher) {\n    const currentPassList = JSON.parse(JSON.stringify(passList));\n    const {slug, name, displayName} = category;\n\n    currentPassList.push({slug, name, displayName});\n\n    if (hasCategoryTheCategory(category, categorySlug) && watcher.hasResult === false) {\n        currentPassList.shift();\n        callBack(currentPassList);\n        Object.assign(watcher, {hasResult: true});\n        return true; // stop outside loop\n    }\n\n    category\n        .categories\n        .some(subCategory => findCategoryPath(subCategory, categorySlug, currentPassList, callBack, watcher));\n\n    // check for top category and for no result\n    if (currentPassList.length === 1 && watcher.hasResult === false) {\n        callBack(null);\n    }\n\n    return false; // continue outside loop\n}\n\nfunction getCategoriesPath(slug) {\n    const {app} = window;\n    const categoryTree = JSON.parse(JSON.stringify(app.categoryTree));\n    const resultObject = {};\n\n    findCategoryPath(categoryTree, slug, [], result => Object.assign(resultObject, {result}), {hasResult: false});\n\n    return resultObject.result;\n}\n\nmodule.exports.initBreadCrumbs = () => {\n    const wrapper = document.querySelector('.js-category-bread-crumbs');\n\n    if (!wrapper) {\n        console.log('no wrapper for bread-crumbs');\n        return;\n    }\n\n    const {app} = window;\n    const category = JSON.parse(JSON.stringify(app.category));\n\n    const categoriesPass = getCategoriesPath(category.slug); // eslint-disable-line no-underscore-dangle\n\n    if (categoriesPass === null) {\n        console.error('Can NOT create bread crumbs for category');\n        return;\n    }\n\n    if (categoriesPass.length === 0) {\n        console.log('Sub root category - do not show bread crumbs');\n        return;\n    }\n\n    categoriesPass.push({\n        slug: category.slug,\n        name: category.name,\n        displayName: category.displayName\n    });\n\n    wrapper.innerHTML = categoriesPass\n        .map(({slug, name, displayName}) =>\n            '<a class=\"bread-crumbs__link\" href=\"{{href}}\">{{name}}</a>'\n                .replace('{{href}}', '/category/' + slug)\n                .replace('{{name}}', displayName || name)\n        )\n        .join('<span class=\"bread-crumbs__separator\">&gt;</span>');\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/category.js","/* global document */\nconst React = require('react');\nconst {Component} = React;\nconst ReactDOM = require('react-dom');\n// const find = require('lodash/find');\n// const {browser} = require('./my-lib/browser');\n\nwindow.app = window.app || {};\n\nclass CategoryMenuItem extends Component {\n    constructor() {\n        super();\n\n        const view = this;\n\n        view.state = {\n            isOpen: false\n        };\n    }\n\n    render() {\n        const view = this;\n        const {state, props} = view;\n        const {isOpen} = state;\n        const {category} = props;\n        const {slug, name, displayName, categories} = category;\n        const visibleName = displayName || name;\n\n        if (categories.length === 0) {\n            return <div className=\"category-menu__item\">\n                <a className=\"category-menu__link\" href={'/category/' + slug}>{visibleName}</a>\n            </div>;\n        }\n\n        return <div className=\"category-menu__item\">\n            <div className=\"category-menu__opener\" onClick={() => view.setState({isOpen: !isOpen})}>\n                {isOpen ? '-' : '+'}\n            </div>\n            <a className=\"category-menu__link\"\n                href={'/category/' + slug}>{visibleName}</a>\n            {isOpen && <div className=\"category-menu__sub-category-wrapper\">\n                {categories.map(childCategory => <CategoryMenuItem category={childCategory} key={childCategory.slug}/>)}\n            </div>}\n        </div>;\n    }\n}\n\nclass CategoryMenu extends Component {\n    constructor() {\n        super();\n\n        const view = this;\n        const {app} = window;\n        const {categoryTree} = app;\n\n        view.state = {\n            categoryTree: JSON.parse(JSON.stringify(categoryTree))\n        };\n    }\n\n    render() {\n        const view = this;\n        const {state} = view;\n        const {categoryTree} = state;\n\n        return categoryTree.categories.map(category => <CategoryMenuItem key={category.slug} category={category}/>);\n    }\n}\n\nmodule.exports.initCategoryMenu = () => {\n    const wrapper = document.querySelector('.js-category-menu');\n    const {categoryTree} = window.app;\n\n    if (!wrapper || !categoryTree) {\n        return;\n    }\n\n    ReactDOM.render(\n        <CategoryMenu/>,\n        wrapper\n    );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/category-menu.js","/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/classnames/index.js\n// module id = 36\n// module chunks = 0","const React = require('react');\nconst {Component} = React;\nconst classnames = require('classnames');\n\nclass ProductPreview extends Component {\n    render() {\n        const view = this;\n        const {props} = view;\n        const {product} = props;\n        const {slug, name, description, images, price, promotable} = product;\n\n        return <a onContextMenu={evt => evt.preventDefault()}\n            href={'/product/' + slug}\n            className={classnames('product-preview', {'product-preview--promotable': promotable})}>\n            <div className=\"product-preview__image\"\n                style={{backgroundImage: 'url(' + images[0] + ')'}}/>\n            <h3 className=\"product-preview__name\">{name}</h3>\n            <div className=\"product-preview__description\" dangerouslySetInnerHTML={{__html: description}}/>\n            <span className=\"product-preview__price\">{price} руб.</span>\n        </a>;\n    }\n}\n\nmodule.exports.ProductPreview = ProductPreview;\n\n\n\n// WEBPACK FOOTER //\n// ./js/component/product-preview.js","/* global document, location, setTimeout */\nconst $ = require('jquery');\nconst {checkForm} = require('./helper/form');\nconst {getUrlQuery} = require('./my-lib/query-parameter');\n\nfunction showError({id}) { // eslint-disable-line complexity\n    const style = 'snackbar';\n    const timeout = 6e3;\n\n    switch (id) {\n        case 'no-needed-data':\n            $.snackbar({\n                content: 'Ошибка: недостаточно данных!', // text of the snackbar\n                style, // add a custom class to your snackbar\n                timeout// time in milliseconds after the snackbar autohides, 0 is disabled\n            });\n            break;\n        case 'user-already-exists':\n            $.snackbar({\n                content: 'Ошибка: пользователь с таким Email уже существует! Попробуйте ВОЙТИ.', // text of the snackbar\n                style, // add a custom class to your snackbar\n                timeout// time in milliseconds after the snackbar autohides, 0 is disabled\n            });\n            break;\n        case 'unknow-sever-error':\n            $.snackbar({\n                content: 'Ошибка: неизвестная ошибка сервера! Да, и такое бывает...', // text of the snackbar\n                style, // add a custom class to your snackbar\n                timeout// time in milliseconds after the snackbar autohides, 0 is disabled\n            });\n            break;\n        case 'user-is-not-exists':\n            $.snackbar({\n                content: 'Ошибка: пользователя с таким Email НЕ существует!', // text of the snackbar\n                style, // add a custom class to your snackbar\n                timeout// time in milliseconds after the snackbar autohides, 0 is disabled\n            });\n            break;\n        case 'wrong-password':\n            $.snackbar({\n                content: 'Ошибка: Пароль неверен!', // text of the snackbar\n                style, // add a custom class to your snackbar\n                timeout// time in milliseconds after the snackbar autohides, 0 is disabled\n            });\n            break;\n\n        default:\n            $.snackbar({\n                content: 'Ошибка: неизвестная ошибка клиента! Да, и такое бывает...', // text of the snackbar\n                style, // add a custom class to your snackbar\n                timeout// time in milliseconds after the snackbar autohides, 0 is disabled\n            });\n    }\n}\n\nmodule.exports.showError = showError;\n\nmodule.exports.initAuthorizationForm = () => {\n    const form = $('.js-authorization-form');\n\n    form.on('submit', evt => evt.preventDefault());\n\n    $('.js-login')\n        .on('click', () => {\n            if (!checkForm(form)) {\n                return;\n            }\n\n            $.ajax({\n                type: 'post',\n                url: '/api/login/',\n                data: form.serialize(), // serializes the form's elements.\n                success: data => {\n                    if (data.hasOwnProperty('error')) {\n                        showError(data.error);\n                        return;\n                    }\n\n                    const redirect = getUrlQuery().redirect;\n\n                    location.href = redirect || document.referrer || location.origin;\n                }\n            });\n        });\n\n    $('.js-register')\n        .on('click', () => {\n            if (!checkForm(form)) {\n                return;\n            }\n\n            $.ajax({\n                type: 'post',\n                url: '/api/registration/',\n                data: form.serialize(), // serializes the form's elements.\n                success: data => {\n                    if (data.hasOwnProperty('error')) {\n                        showError(data.error);\n                        return;\n                    }\n\n                    $.snackbar({\n                        content: 'Регистрация прошла успешно!', // text of the snackbar\n                        style: 'snackbar', // add a custom class to your snackbar\n                        timeout: 3e3// time in milliseconds after the snackbar autohides, 0 is disabled\n                    });\n\n                    $('.js-login').click();\n\n                    console.log('add auto login here');\n                }\n            });\n        });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/authorization.js","/* global document */\nconst React = require('react');\nconst {Component} = React;\nconst ReactDOM = require('react-dom');\nconst {search, sortProduct} = require('./my-lib/search');\nconst {normalizeString} = require('./my-lib/format');\nconst {getUrlQuery} = require('./my-lib/query-parameter');\nconst classnames = require('classnames');\nconst {saveScrollTop, restoreScrollTop} = require('./my-lib/screen');\nconst {ProductPreview} = require('./component/product-preview');\n\nclass SearchPage extends Component {\n    constructor() {\n        super();\n\n        const view = this;\n\n        view.state = {\n            query: '',\n            products: [],\n            isInProgress: false\n        };\n    }\n\n    componentDidMount() {\n        const view = this;\n        const {query = ''} = getUrlQuery();\n        const {searchInput} = view.refs;\n\n        searchInput.value = decodeURI(query);\n\n        if (query) {\n            view.onSearchInput();\n        }\n    }\n\n    onSearchInput() {\n        const view = this;\n        const {searchInput} = view.refs;\n        const query = normalizeString(searchInput.value);\n\n        saveScrollTop();\n\n        view.setState({isInProgress: true}, restoreScrollTop);\n\n        search(query)\n            .then(searchResult => {\n                if (query !== normalizeString(searchInput.value)) {\n                    return;\n                }\n\n                view.setState({\n                    products: sortProduct(searchResult.products, query),\n                    query,\n                    isInProgress: false\n                }, restoreScrollTop);\n            });\n    }\n\n    renderList() {\n        const view = this;\n        const {state} = view;\n        const {products, query} = state;\n\n        if (!query) {\n            return <h3 className=\"page-header\">Введите запрос для поиска!</h3>;\n        }\n\n        if (!products.length) {\n            return <h3 className=\"page-header\">Ничего не найдено!</h3>;\n        }\n\n        return products.map(product => <ProductPreview key={product.slug} product={product}/>);\n    }\n\n    render() {\n        const view = this;\n        const {state} = view;\n        const {isInProgress} = state;\n\n        const searchIconClassName = classnames('header-search__icon', {\n            'header-search__icon--in-progress': isInProgress\n        });\n\n        return <div className=\"search-page\">\n            <div className=\"search-page__input-wrapper\">\n                <input\n                    ref=\"searchInput\"\n                    className=\"search-page__input\"\n                    placeholder=\"Поиск...\"\n                    onInput={evt => view.onSearchInput()}\n                />\n                <div onClick={() => view.refs.searchInput.focus()} className={searchIconClassName}/>\n            </div>\n            <div\n                className={classnames(\n                    'products-preview',\n                    'search-page__result',\n                    {'search-page__result--in-progress': isInProgress})\n                }>\n                {view.renderList()}\n            </div>\n        </div>;\n    }\n}\n\nmodule.exports.initPage = () => {\n    const wrapper = document.querySelector('.js-search-page-result');\n\n    if (!wrapper) {\n        return;\n    }\n\n    ReactDOM.render(\n        <SearchPage/>,\n        wrapper\n    );\n};\n\nmodule.exports.SearchPage = SearchPage;\n\n\n\n// WEBPACK FOOTER //\n// ./js/search-page.js"],"sourceRoot":""}