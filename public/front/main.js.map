{"version":3,"sources":["webpack:///./js/authorization.js","webpack:///../node_modules/classnames/index.js","webpack:///./js/search-page.js","webpack:///./js/index.js","webpack:///./style/css/_root.scss","webpack:///./js/home.js","webpack:///./js/product.js","webpack:///./js/helper/image.js","webpack:///./js/helper/form.js","webpack:///./js/basket.js","webpack:///./js/cart.js","webpack:///./js/ordering.js","webpack:///./js/order.js","webpack:///./js/my-lib/browser.js","webpack:///./js/header-nav.js","webpack:///./js/header-search.js","webpack:///./js/my-lib/search.js","webpack:///./js/my-lib/screen.js"],"names":["$","require","checkForm","getUrlQuery","showError","id","style","timeout","snackbar","content","module","exports","initAuthorizationForm","form","on","evt","preventDefault","ajax","type","url","data","serialize","success","hasOwnProperty","error","redirect","location","href","document","referrer","origin","click","console","log","React","Component","ReactDOM","search","sortProduct","normalizeString","classnames","saveScrollTop","restoreScrollTop","SearchPage","view","state","query","products","isInProgress","searchInput","refs","value","decodeURI","onSearchInput","setState","then","searchResult","length","map","slug","name","description","images","price","promotable","backgroundImage","searchIconClassName","renderList","initPage","wrapper","querySelector","render","window","app","FastClick","homeScripts","productScripts","authorizationScripts","basketScripts","cartScripts","orderingScripts","orderScripts","headerScripts","headerSearchScripts","searchPageScripts","body","initHeaderNav","initHeaderSearch","initSwiper","initPagination","productReview","initSwiperZoom","initAddToBasketForm","initBasket","initCartTable","initOrderForm","initOrderTable","initPdfOrder","Swiper","onSwiperResize","swiper","slideHeight","slideWidth","width","documentElement","clientWidth","neededHeight","Math","min","round","neededHeightPx","container","slides","nodes","concat","forEach","Object","assign","node","height","homeSwiper","pagination","paginationClickable","centeredSlides","autoplay","autoplayDisableOnInteraction","loop","onInit","onAfterResize","indexPagination","totalPages","startPage","paginationWrapper","remove","twbsPagination","initiateStartPageClick","visiblePages","prev","next","first","last","onPageClick","page","loadImages","productSwiperImages","productSwiperWrapper","addClass","Array","prototype","slice","call","src","maxHeightImage","sort","image0","image1","size","productSwiper","keyboardControl","product","win","fullPageClassName","onWindowResize","hasClass","removeClass","toggleClass","dispatchEvent","Event","basket","change","Number","find","val","loadImage","Promise","resolve","reject","image","Image","onLoad","onload","onerror","onError","imageSrcList","all","checkInput","input","hasAttribute","pattern","getAttribute","regExp","RegExp","test","inputs","every","Basket","counter","postfix","empty","numberToMoney","CartTable","items","getItems","newCount","set","ii","article","count","onInputNumberBlur","onInputChange","parseInt","currentTarget","getFullPrice","history","back","createOrder","serializedForm","serializeToJSON","basketItems","JSON","stringify","replace","updateUserData","orderingForm","clear","catch","browser","OrderTable","order","parse","reduce","accumulator","item","user","firstName","lastName","phone","email","country","region","town","address","postcode","additional","saveFile","navigator","msSaveBlob","Blob","URL","createObjectURL","link","download","revokeObjectURL","isIos","pdfOrder","cssClassBusy","FormData","append","innerHTML","fetch","method","response","blob","createdAtFormat","myBlob","Browser","Boolean","platform","narrowWidth","TabContent","props","category","categories","displayName","HeaderNav","categoryTree","activeCategorySlug","isNarrow","nextProps","nextState","nextIsNarrow","closeTabs","classList","add","bindEvents","onResize","addEventListener","newSlug","activeCategory","category1","category2","switchTab","narrowRender","openTab","HeaderSearch","hasFocus","onFormSubmit","setTimeout","emptyQuery","searchCache","rawResult","json","result","product1","product2","delta","scrollMethods","docElem","scrollTop"],"mappings":"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","file":"main.js","sourcesContent":["/* global document, location, setTimeout */\nconst $ = require('jquery');\nconst {checkForm} = require('./helper/form');\nconst {getUrlQuery} = require('./my-lib/query-parameter');\n\nfunction showError({id}) { // eslint-disable-line complexity\n    const style = 'snackbar';\n    const timeout = 6e3;\n\n    switch (id) {\n        case 'no-needed-data':\n            $.snackbar({\n                content: 'Ошибка: недостаточно данных!', // text of the snackbar\n                style, // add a custom class to your snackbar\n                timeout// time in milliseconds after the snackbar autohides, 0 is disabled\n            });\n            break;\n        case 'user-already-exists':\n            $.snackbar({\n                content: 'Ошибка: пользователь с таким Email уже существует! Попробуйте ВОЙТИ.', // text of the snackbar\n                style, // add a custom class to your snackbar\n                timeout// time in milliseconds after the snackbar autohides, 0 is disabled\n            });\n            break;\n        case 'unknow-sever-error':\n            $.snackbar({\n                content: 'Ошибка: неизвестная ошибка сервера! Да, и такое бывает...', // text of the snackbar\n                style, // add a custom class to your snackbar\n                timeout// time in milliseconds after the snackbar autohides, 0 is disabled\n            });\n            break;\n        case 'user-is-not-exists':\n            $.snackbar({\n                content: 'Ошибка: пользователя с таким Email НЕ существует!', // text of the snackbar\n                style, // add a custom class to your snackbar\n                timeout// time in milliseconds after the snackbar autohides, 0 is disabled\n            });\n            break;\n        case 'wrong-password':\n            $.snackbar({\n                content: 'Ошибка: Пароль неверен!', // text of the snackbar\n                style, // add a custom class to your snackbar\n                timeout// time in milliseconds after the snackbar autohides, 0 is disabled\n            });\n            break;\n\n        default:\n            $.snackbar({\n                content: 'Ошибка: неизвестная ошибка клиента! Да, и такое бывает...', // text of the snackbar\n                style, // add a custom class to your snackbar\n                timeout// time in milliseconds after the snackbar autohides, 0 is disabled\n            });\n    }\n}\n\nmodule.exports.showError = showError;\n\nmodule.exports.initAuthorizationForm = () => {\n    const form = $('.js-authorization-form');\n\n    form.on('submit', evt => evt.preventDefault());\n\n    $('.js-login')\n        .on('click', () => {\n            if (!checkForm(form)) {\n                return;\n            }\n\n            $.ajax({\n                type: 'post',\n                url: '/api/login/',\n                data: form.serialize(), // serializes the form's elements.\n                success: data => {\n                    if (data.hasOwnProperty('error')) {\n                        showError(data.error);\n                        return;\n                    }\n\n                    const redirect = getUrlQuery().redirect;\n\n                    location.href = redirect || document.referrer || location.origin;\n                }\n            });\n        });\n\n    $('.js-register')\n        .on('click', () => {\n            if (!checkForm(form)) {\n                return;\n            }\n\n            $.ajax({\n                type: 'post',\n                url: '/api/registration/',\n                data: form.serialize(), // serializes the form's elements.\n                success: data => {\n                    if (data.hasOwnProperty('error')) {\n                        showError(data.error);\n                        return;\n                    }\n\n                    $.snackbar({\n                        content: 'Регистрация прошла успешно!', // text of the snackbar\n                        style: 'snackbar', // add a custom class to your snackbar\n                        timeout: 3e3// time in milliseconds after the snackbar autohides, 0 is disabled\n                    });\n\n                    $('.js-login').click();\n\n                    console.log('add auto login here');\n                }\n            });\n        });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/authorization.js","/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/classnames/index.js\n// module id = 127\n// module chunks = 0","/* global document */\nconst React = require('react');\nconst {Component} = React;\nconst ReactDOM = require('react-dom');\nconst {search, sortProduct} = require('./my-lib/search');\nconst {normalizeString} = require('./my-lib/format');\nconst {getUrlQuery} = require('./my-lib/query-parameter');\nconst classnames = require('classnames');\nconst {saveScrollTop, restoreScrollTop} = require('./my-lib/screen');\n\nclass SearchPage extends Component {\n    constructor() {\n        super();\n\n        const view = this;\n\n        view.state = {\n            query: '',\n            products: [],\n            isInProgress: false\n        };\n    }\n\n    componentDidMount() {\n        const view = this;\n        const {query = ''} = getUrlQuery();\n        const {searchInput} = view.refs;\n\n        searchInput.value = decodeURI(query);\n        view.onSearchInput();\n    }\n\n    onSearchInput() {\n        const view = this;\n        const {searchInput} = view.refs;\n        const query = normalizeString(searchInput.value);\n\n        saveScrollTop();\n\n        view.setState({isInProgress: true}, restoreScrollTop);\n\n        search(query)\n            .then(searchResult => {\n                if (query !== normalizeString(searchInput.value)) {\n                    return;\n                }\n\n                view.setState({\n                    products: sortProduct(searchResult.products, query),\n                    query,\n                    isInProgress: false\n                }, restoreScrollTop);\n            });\n    }\n\n    renderList() {\n        const view = this;\n        const {state} = view;\n        const {products, query} = state;\n\n        if (!query) {\n            return <h3 className=\"page-header\">Введите запрос для поиска!</h3>;\n        }\n\n        if (!products.length) {\n            return <h3 className=\"page-header\">Ничего не найдено!</h3>;\n        }\n\n        return products.map(({slug, name, description, images, price, promotable}) =>\n            <a onContextMenu={evt => evt.preventDefault()}\n                href={'/product/' + slug}\n                className={classnames('product-preview', {'product-preview--promotable': promotable})}\n                key={slug}>\n                <div className=\"product-preview__image\"\n                    style={{backgroundImage: 'url(' + images[0] + ')'}}/>\n                <h3 className=\"product-preview__name\">{name}</h3>\n                <div className=\"product-preview__description\">{description}</div>\n                <span className=\"product-preview__price\">{price} руб.</span>\n            </a>);\n    }\n\n    render() {\n        const view = this;\n        const {state} = view;\n        const {isInProgress} = state;\n\n        const searchIconClassName = classnames('header-search__icon', {\n            'header-search__icon--in-progress': isInProgress\n        });\n\n        return <div className=\"search-page\">\n            <div className=\"search-page__input-wrapper\">\n                <input\n                    ref=\"searchInput\"\n                    className=\"search-page__input\"\n                    placeholder=\"Поиск...\"\n                    onInput={evt => view.onSearchInput()}\n                />\n                <div className={searchIconClassName}/>\n            </div>\n            <div\n                className={classnames(\n                    'products-preview',\n                    'search-page__result',\n                    {'search-page__result--in-progress': isInProgress})\n                }>\n                {view.renderList()}\n            </div>\n        </div>;\n    }\n}\n\nmodule.exports.initPage = () => {\n    const wrapper = document.querySelector('.js-search-page-result');\n\n    if (!wrapper) {\n        return;\n    }\n\n    ReactDOM.render(\n        <SearchPage/>,\n        wrapper\n    );\n};\n\nmodule.exports.SearchPage = SearchPage;\n\n\n\n// WEBPACK FOOTER //\n// ./js/search-page.js","/* global document */\nrequire('./../style/css/_root.scss');\n\nwindow.app = window.app || {};\n\nconst FastClick = require('fastclick');\nconst $ = require('jquery');\n\nconst homeScripts = require('./home');\nconst productScripts = require('./product');\nconst authorizationScripts = require('./authorization');\nconst basketScripts = require('./basket');\nconst cartScripts = require('./cart');\nconst orderingScripts = require('./ordering');\nconst orderScripts = require('./order');\nconst headerScripts = require('./header-nav');\nconst headerSearchScripts = require('./header-search');\nconst searchPageScripts = require('./search-page');\n\n$(() => {\n    // main part\n    new FastClick(document.body); // eslint-disable-line no-new\n\n    // main scripts\n    headerScripts.initHeaderNav();\n\n    // search\n    headerSearchScripts.initHeaderSearch();\n\n    // home\n    homeScripts.initSwiper();\n    homeScripts.initPagination();\n    homeScripts.productReview();\n\n    // product\n    productScripts.initSwiper();\n    productScripts.initSwiperZoom();\n    productScripts.initAddToBasketForm();\n\n    // authorization\n    authorizationScripts.initAuthorizationForm();\n\n    // basket\n    basketScripts.initBasket();\n\n    // cart\n    cartScripts.initCartTable();\n\n    // ordering\n    orderingScripts.initOrderForm();\n\n    // order\n    orderScripts.initOrderTable();\n    orderScripts.initPdfOrder();\n\n    // search\n    searchPageScripts.initPage();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/index.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./style/css/_root.scss\n// module id = 321\n// module chunks = 0","/* global document */\nconst Swiper = require('./lib/idangerous.swiper');\nconst $ = require('jquery');\n\nmodule.exports.initSwiper = () => {\n    function onSwiperResize(swiper) {\n        // count height\n        // const slideHeight = 261;\n        // const slideWidth = 980;\n        const slideHeight = 325;\n        const slideWidth = 1220;\n        const width = document.documentElement.clientWidth;\n        const neededHeight = Math.min(Math.round(slideHeight * width / slideWidth), slideHeight);\n        const neededHeightPx = neededHeight + 'px';\n\n        // get nodes\n        const {wrapper, container, slides} = swiper;\n        const nodes = [wrapper, container].concat(slides);\n\n        nodes.forEach(node => Object.assign(node.style, {height: neededHeightPx}));\n    }\n\n    const homeSwiper = new Swiper('.js-home-swiper-wrapper', {\n        pagination: '.swiper-pagination',\n        // nextButton: '.swiper-button-next',\n        // prevButton: '.swiper-button-prev',\n        paginationClickable: true,\n        // spaceBetween: 30,\n        centeredSlides: true,\n        autoplay: 6000,\n        autoplayDisableOnInteraction: false,\n        loop: true,\n        onInit: onSwiperResize,\n        onAfterResize: onSwiperResize\n    });\n\n    console.log('home swiper is here ->', homeSwiper);\n};\n\nmodule.exports.initPagination = () => {\n    const {indexPagination} = window.app;\n\n    if (!indexPagination) {\n        console.log('no app.indexPagination');\n        return;\n    }\n\n    const {totalPages, startPage} = indexPagination;\n    const {location} = window;\n\n    const paginationWrapper = $('.js-index-pagination');\n\n    if (totalPages === 1) {\n        paginationWrapper.remove();\n        return;\n    }\n\n    paginationWrapper.twbsPagination({\n        totalPages,\n        startPage,\n\n        initiateStartPageClick: false,\n        visiblePages: 5,\n\n        prev: '&#8672;',\n        next: '&#8674;',\n\n        first: '&#8676;',\n        last: '&#8677;',\n\n        onPageClick: (evt, page) => Object.assign(location, {search: 'page=' + page})\n    });\n};\n\nmodule.exports.productReview = () => {\n    $('.js-product-preview').on('contextmenu', evt => evt.preventDefault());\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/home.js","/* global document, Event */\nconst Swiper = require('./lib/idangerous.swiper');\nconst $ = require('jquery');\n\nconst {loadImages} = require('./helper/image');\n\nmodule.exports.initSwiper = () => {\n    const productSwiperImages = $('.js-product-swiper-img');\n    const productSwiperWrapper = $('.js-product-swiper-wrapper');\n\n    if (productSwiperImages.length <= 1) {\n        productSwiperWrapper.addClass('product-swiper-wrapper--one-image');\n        console.log('no product swiper, here is one image');\n        return;\n    }\n\n    loadImages(Array.prototype.slice.call(productSwiperImages).map(({src}) => src)) // eslint-disable-line prefer-reflect\n        .then(images => {\n            const maxHeightImage = images.sort((image0, image1) => image1.height - image0.height)[0];\n\n            function onSwiperResize(swiper) {\n                const {wrapper, container, slides} = swiper;\n                const size = Math.min(maxHeightImage.height, container.clientWidth) + 'px';\n                const nodes = [wrapper, container].concat(slides);\n\n                nodes.forEach(node => Object.assign(node.style, {height: size}));\n            }\n\n            const productSwiper = new Swiper(productSwiperWrapper[0], {\n                pagination: '.swiper-pagination',\n                // nextButton: '.swiper-button-next',\n                // prevButton: '.swiper-button-prev',\n                paginationClickable: true,\n                // spaceBetween: 30,\n                centeredSlides: true,\n                autoplay: 6000,\n                autoplayDisableOnInteraction: false,\n                loop: true,\n                keyboardControl: true,\n                onInit: onSwiperResize,\n                onAfterResize: onSwiperResize\n            });\n\n            console.log('product swiper is here ->', productSwiper);\n        });\n};\n\nmodule.exports.initSwiperZoom = () => {\n    const product = $('.js-product');\n    const win = window;\n    const fullPageClassName = 'product--full-page';\n\n    function onWindowResize() {\n        if (product.hasClass(fullPageClassName)) {\n            return;\n        }\n\n        if (win.document.documentElement.clientWidth < 980) {\n            product.addClass(fullPageClassName);\n            return;\n        }\n\n        product.removeClass(fullPageClassName);\n    }\n\n    onWindowResize();\n\n    $(win).on('resize', onWindowResize);\n\n    $('.js-product-swiper-wrapper').on('dblclick', () => {\n        product.toggleClass(fullPageClassName);\n        win.dispatchEvent(new Event('resize'));\n    });\n};\n\nmodule.exports.initAddToBasketForm = () => {\n    const win = window;\n\n    win.app = win.app || {};\n\n    const {app} = win;\n    const {product = null} = app;\n\n    if (!product) {\n        console.log('no add to basket form');\n        return;\n    }\n\n    const form = $('.js-add-to-basket-form');\n\n    form.on('submit', evt => {\n        evt.preventDefault();\n\n        const {basket} = app;\n\n        basket.change(product, Number(form.find('.js-count').val()));\n\n        $.snackbar({\n            content: 'Товар добавлен в корзину!', // text of the snackbar\n            style: 'snackbar', // add a custom class to your snackbar\n            timeout: 3e3// time in milliseconds after the snackbar autohides, 0 is disabled\n        });\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/product.js","/* global Image */\n\nfunction loadImage(src) {\n    return new Promise((resolve, reject) => {\n        const image = new Image();\n\n        function onLoad() {\n            image.onload = image.onerror = null;\n            resolve(image);\n        }\n\n        function onError() {\n            image.onload = image.onerror = null;\n            reject(image);\n        }\n\n        image.onload = onLoad;\n        image.onerror = onError;\n\n        image.src = src;\n    });\n}\n\nfunction loadImages(imageSrcList) {\n    return Promise.all(imageSrcList.map(loadImage));\n}\n\nmodule.exports.loadImage = loadImage;\nmodule.exports.loadImages = loadImages;\n\n\n\n// WEBPACK FOOTER //\n// ./js/helper/image.js","function checkInput(input) {\n    const {value} = input;\n\n    if (input.hasAttribute('required') && !value) {\n        return false;\n    }\n\n    const pattern = input.getAttribute('pattern');\n\n    if (!pattern) {\n        return true;\n    }\n\n    const regExp = new RegExp(pattern);\n\n    return regExp.test(value);\n}\n\nfunction checkForm(form) {\n    const inputs = Array.prototype.slice.call(form.find('input')); // eslint-disable-line prefer-reflect\n\n    return inputs.every(checkInput);\n}\n\nmodule.exports.checkInput = checkInput;\nmodule.exports.checkForm = checkForm;\n\n\n\n// WEBPACK FOOTER //\n// ./js/helper/form.js","const $ = require('jquery');\nconst Basket = require('./my-lib/basket');\n\nmodule.exports.initBasket = () => {\n    const basket = new Basket({\n        wrapper: $('.js-cart')[0],\n        counter: $('.js-counter')[0],\n        postfix: ' руб.',\n        empty: 'Нет товаров'\n    });\n\n    const win = window;\n\n    win.app = win.app || {};\n    win.app.basket = basket;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/basket.js","/* global document, history*/\nconst React = require('react');\nconst {Component} = React;\nconst ReactDOM = require('react-dom');\nconst {numberToMoney} = require('./my-lib/format');\n\nwindow.app = window.app || {};\n\nclass CartTable extends Component {\n    constructor() {\n        super();\n\n        const view = this;\n        const {app} = window;\n        const {basket} = app;\n\n        view.state = {\n            items: basket.getItems()\n        };\n    }\n\n    onInputChange(slug, newCount) {\n        const view = this;\n        const {app} = window;\n        const {basket} = app;\n\n        basket.set({slug}, newCount);\n        view.setState({\n            items: basket.getItems()\n        });\n    }\n\n    render() {\n        const view = this;\n        const {state} = view;\n        const {items} = state;\n\n        if (items.length === 0) {\n            return <h2 className=\"page-header\">Корзина пуста</h2>;\n        }\n\n        return <div className=\"cart\">\n            <table className=\"table\">\n                <thead className=\"table__head\">\n                    <tr>\n                        <th className=\"table__th\">№</th>\n                        <th className=\"table__th\">Наименование товара</th>\n                        <th className=\"table__th\">Кол-во</th>\n                        <th className=\"table__th\">Цена (руб.)</th>\n                        <th className=\"table__th\">Сумма (руб.)</th>\n                        <th className=\"table__th\"/>\n                    </tr>\n                </thead>\n                <tbody>\n                    {items.map((product, ii) => <tr className=\"table__tr\" key={ii}>\n                        <td className=\"table__td table__td--ta-center\">{ii + 1}</td>\n                        <td className=\"table__td\">\n                            <div className=\"table__product-image\"\n                                style={{backgroundImage: 'url(' + product.images[0] + ')'}}/>\n                            <a href={'/product/' + product.slug} className=\"table__product-name\">{product.name}</a>\n                            <p className=\"table__product-article\">Артикул: {product.article}</p>\n                        </td>\n                        <td className=\"table__td\">\n                            <input\n                                className=\"input input--number block-center\"\n                                type=\"number\"\n                                min=\"1\"\n                                defaultValue={product.count}\n                                onBlur={onInputNumberBlur}\n                                onChange={evt =>\n                                    view.onInputChange(product.slug, parseInt(evt.currentTarget.value, 10) || 1)}\n                                required/>\n                        </td>\n                        <td className=\"table__td table__td--ta-right\">\n                            <span className=\"table__number\">\n                                {numberToMoney(product.price)}\n                            </span>\n                        </td>\n                        <td className=\"table__td table__td--ta-right\">\n                            <span className=\"table__number\">\n                                {numberToMoney(product.count * product.price)}\n                            </span>\n                        </td>\n                        <td className=\"table__td\">\n                            <span onClick={evt => view.onInputChange(product.slug, 0)} className=\"table__close\" />\n                        </td>\n                    </tr>)}\n                    <tr>\n                        <td colSpan=\"3\">\n                            <span className=\"table__number bold\">\n                                Итого:\n                            </span>\n                        </td>\n                        <td colSpan=\"2\">\n                            <span className=\"table__number table__number--left bold\">\n                                {numberToMoney(window.app.basket.getFullPrice())} руб.\n                            </span>\n                        </td>\n                        <td/>\n                    </tr>\n                </tbody>\n            </table>\n\n            <div className=\"buttons-wrapper\">\n                <button className=\"button\" onClick={() => history.back()}>продолжить покупки</button>\n                <a href=\"/ordering\" className=\"button\">оформить заказ</a>\n            </div>\n        </div>;\n    }\n}\n\nfunction onInputNumberBlur(evt) {\n    const input = evt.currentTarget;\n    const value = parseInt(input.value, 10) || 0;\n\n    if (value <= 0) {\n        input.value = 1;\n    }\n}\n\nmodule.exports.initCartTable = () => {\n    const wrapper = document.querySelector('.js-table-cart');\n\n    if (!wrapper) {\n        return;\n    }\n\n    ReactDOM.render(\n        <CartTable/>,\n        wrapper\n    );\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./js/cart.js","/* global location */\nconst $ = require('jquery');\nconst {showError} = require('./authorization');\n\nfunction createOrder(form) {\n    return new Promise((resolve, reject) => {\n        const serializedForm = form.serializeToJSON();\n        const basketItems = window.app.basket.getItems();\n        const products = basketItems\n            .map(({slug, name, count}) => JSON.stringify({slug, name, count})\n                .replace(/\":/g, '\": ')\n                .replace(/^{|}$/g, '')\n                .replace(/\",\\s?\"/g, '\"; \"')\n                .replace(/\"([\\S\\s]+?)\"/g, '$1')\n            );\n\n        $.ajax({\n            type: 'post',\n            url: '/api/create-order',\n            data: {\n                ...serializedForm,\n                products,\n                basketItems: JSON.stringify(basketItems)\n            }, // serializes the form's elements.\n            success: data => data.hasOwnProperty('error') ?\n                reject(data) :\n                resolve(data)\n        });\n    });\n}\n\nfunction updateUserData(form) {\n    return new Promise((resolve, reject) => {\n        $.ajax({\n            type: 'post',\n            url: '/api/update',\n            data: form.serialize(), // serializes the form's elements.\n            success: data => data.hasOwnProperty('error') ?\n                reject(data) :\n                resolve(data)\n        });\n    });\n}\n\nmodule.exports.initOrderForm = () => {\n    const orderingForm = $('.js-ordering-form');\n\n    if (orderingForm.length === 0) {\n        console.log('NO ordering form');\n        return;\n    }\n\n    orderingForm.on('submit', evt => {\n        evt.preventDefault();\n\n        updateUserData(orderingForm)\n            .then(() => createOrder(orderingForm))\n            .then(data => {\n                window.app.basket.clear();\n                Object.assign(location, {href: '/order/' + data.slug + '?header=congratulation'});\n            })\n            .catch(showError);\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/ordering.js","/* global document, history, navigator, URL, Blob, FormData*/\nconst React = require('react');\nconst {Component} = React;\nconst ReactDOM = require('react-dom');\nconst {numberToMoney} = require('./my-lib/format');\nconst $ = require('jquery');\nconst {browser} = require('./my-lib/browser');\n\nwindow.app = window.app || {};\n\nclass OrderTable extends Component {\n    constructor() {\n        super();\n\n        const view = this;\n        const {app} = window;\n        const {order} = app;\n\n        view.state = {\n            order: JSON.parse(JSON.stringify(order))\n        };\n    }\n\n    getFullPrice() {\n        const view = this;\n        const items = view.state.order.basketItems;\n\n        return items.reduce((accumulator, item) => accumulator + item.count * (item.price || 0), 0);\n    }\n\n    render() {\n        const view = this;\n        const {state} = view;\n        const {order} = state;\n\n        const items = order.basketItems;\n\n        return <div className=\"cart\">\n            <table className=\"table\">\n                <thead className=\"table__head\">\n                    <tr>\n                        <th className=\"table__th\">№</th>\n                        <th className=\"table__th\">Наименование товара</th>\n                        <th className=\"table__th\">Кол-во</th>\n                        <th className=\"table__th\">Цена (руб.)</th>\n                        <th className=\"table__th\">Сумма (руб.)</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {items.map((product, ii) => <tr className=\"table__tr\" key={ii}>\n                        <td className=\"table__td table__td--ta-center\">{ii + 1}</td>\n                        <td className=\"table__td\">\n                            <div className=\"table__product-image no-pdf\"\n                                style={{backgroundImage: 'url(' + product.images[0] + ')'}}/>\n                            <a href={'/product/' + product.slug} className=\"table__product-name\">{product.name}</a>\n                            <p className=\"table__product-article\">Артикул: {product.article}</p>\n                        </td>\n                        <td className=\"table__td\">\n                            <input\n                                className=\"input input--number block-center\"\n                                type=\"text\"\n                                value={product.count}\n                                disabled/>\n                        </td>\n                        <td className=\"table__td table__td--ta-right\">\n                            <span className=\"table__number\">\n                                {numberToMoney(product.price)}\n                            </span>\n                        </td>\n                        <td className=\"table__td table__td--ta-right\">\n                            <span className=\"table__number\">\n                                {numberToMoney(product.count * product.price)}\n                            </span>\n                        </td>\n                    </tr>)}\n                    <tr>\n                        <td colSpan=\"3\">\n                            <span className=\"table__number bold\">\n                                Итого:\n                            </span>\n                        </td>\n                        <td colSpan=\"2\">\n                            <span className=\"table__number table__number--left bold\">\n                                {numberToMoney(view.getFullPrice())} руб.\n                            </span>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n\n            <div className=\"form clear-self\">\n                <h2 className=\"page-header\">Платёжный адрес</h2>\n                <p className=\"seo-text__paragraph\">Имя: {order.user.firstName}</p>\n                <p className=\"seo-text__paragraph\">Фамилия: {order.user.lastName}</p>\n                <p className=\"seo-text__paragraph\">Телефон: {order.phone}</p>\n                <p className=\"seo-text__paragraph\">Email: {order.user.email}</p>\n                <p className=\"seo-text__paragraph\">Страна: {order.country}</p>\n                <p className=\"seo-text__paragraph\">Область: {order.region}</p>\n                <p className=\"seo-text__paragraph\">Город: {order.town}</p>\n                <p className=\"seo-text__paragraph\">Адрес: {order.address}</p>\n                <p className=\"seo-text__paragraph\">Индекс: {order.postcode}</p>\n                <p className=\"seo-text__paragraph\">Пожелания к заказу: {order.additional}</p>\n            </div>\n        </div>;\n    }\n}\n\nmodule.exports.initOrderTable = () => {\n    const wrapper = document.querySelector('.js-table-order');\n\n    if (!wrapper) {\n        return;\n    }\n\n    ReactDOM.render(\n        <OrderTable/>,\n        wrapper\n    );\n};\n\nmodule.exports.initPdfOrder = () => {\n    function saveFile(name, type, data) {\n        if (navigator.msSaveBlob) {\n            navigator.msSaveBlob(new Blob([data], {type}), name);\n            return;\n        }\n\n        const url = URL.createObjectURL(new Blob([data], {type}));\n\n        const link = $('<a />', {\n            style: 'display: none',\n            href: url,\n            download: name\n        });\n\n        link[0].click();\n        URL.revokeObjectURL(url);\n    }\n\n    if (browser.isIos()) {\n        return;\n    }\n\n    const pdfOrder = $('.js-pdf-order');\n    const cssClassBusy = 'pdf-order--busy';\n\n    pdfOrder.removeClass('hidden');\n\n    pdfOrder.on('click', () => {\n        pdfOrder.addClass(cssClassBusy);\n\n        const form = new FormData();\n\n        form.append('html', $('.js-pdf')[0].innerHTML);\n\n        const {app} = window;\n        const {order} = app;\n\n        window\n            .fetch('/api/pdf-order', {\n                method: 'post',\n                body: form\n            })\n            .then(response => response.blob())\n            .then(myBlob => saveFile(\n                ('tattoobrands.by-' + order.slug + '-' + order.createdAtFormat + '.pdf')\n                    .replace(/\\//gi, '-')\n                    .replace(/\\s/gi, ''),\n                'octet/stream',\n                myBlob)\n            )\n            .catch(evt => console.error(evt))\n            .then(() => pdfOrder.removeClass(cssClassBusy));\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/order.js","/* global document, navigator */\nclass Browser {\n    isIos() {\n        return Boolean(navigator.platform) && /iPad|iPhone|iPod/.test(navigator.platform);\n    }\n\n    // isTouch() {\n    //     return 'ontouchstart' in document;\n    // }\n}\n\nmodule.exports.browser = new Browser();\n\n\n\n// WEBPACK FOOTER //\n// ./js/my-lib/browser.js","/* global document */\nconst React = require('react');\nconst {Component} = React;\nconst ReactDOM = require('react-dom');\nconst find = require('lodash/find');\n// const {browser} = require('./my-lib/browser');\n\nwindow.app = window.app || {};\n\nconst narrowWidth = 767;\n\nclass TabContent extends Component {\n    render() {\n        const view = this;\n        const {props} = view;\n        const {category} = props;\n        const {categories} = category;\n\n        if (categories.length === 0) {\n            return null;\n        }\n\n        return <div className=\"header-nav__tab-wrapper\">\n            <div className=\"category-item__wrapper clear-self\">\n                {categories.map(({image, displayName, name, slug}) =>\n                    <a key={slug} href={'/category/' + slug} className=\"category-item clear-self\">\n                        <span className=\"category-item__image\" style={{backgroundImage: 'url(' + image + ')'}}/>\n                        <p className=\"category-item__name\">{displayName || name}</p>\n                    </a>)}\n            </div>\n        </div>;\n    }\n}\n\nclass HeaderNav extends Component {\n    constructor() {\n        super();\n\n        const view = this;\n        const {app} = window;\n        const {categoryTree} = app;\n\n        view.state = {\n            categoryTree: JSON.parse(JSON.stringify(categoryTree)),\n            activeCategorySlug: null,\n            isNarrow: false,\n            wrapper: document.querySelector('.js-header-nav')\n        };\n    }\n\n    componentWillUpdate(nextProps, nextState) {\n        const view = this;\n        const {state} = view;\n        const {isNarrow} = state;\n        const nextIsNarrow = nextState.isNarrow;\n\n        if (isNarrow === nextIsNarrow) {\n            return;\n        }\n\n        view.closeTabs();\n    }\n\n    componentDidUpdate() {\n        const view = this;\n        const {state} = view;\n        const {wrapper, isNarrow} = state;\n\n        if (isNarrow) {\n            wrapper.classList.remove('header-nav__sticky');\n        } else {\n            wrapper.classList.add('header-nav__sticky');\n        }\n    }\n\n    componentDidMount() {\n        const view = this;\n\n        view.bindEvents();\n        view.onResize();\n    }\n\n    onResize() {\n        const view = this;\n        const isNarrow = document.documentElement.clientWidth < narrowWidth;\n\n        view.setState({isNarrow});\n    }\n\n    bindEvents() {\n        const view = this;\n\n        window.addEventListener('resize', () => view.onResize(), false);\n    }\n\n    openTab(slug) {\n        const view = this;\n\n        view.setState({activeCategorySlug: slug});\n    }\n\n    closeTabs() {\n        const view = this;\n\n        view.setState({activeCategorySlug: null});\n    }\n\n    switchTab(slug) {\n        const view = this;\n        const {state} = view;\n        const {activeCategorySlug} = state;\n        const newSlug = activeCategorySlug === slug ? null : slug;\n\n        view.setState({activeCategorySlug: newSlug});\n    }\n\n    narrowRender() {\n        const view = this;\n        const {state} = view;\n        const {categoryTree} = state;\n        const activeCategory = find(categoryTree.categories, {slug: state.activeCategorySlug});\n\n        return <div>\n            {categoryTree.categories\n                .sort((category1, category2) => category1.order - category2.order)\n                .map(({displayName, name, slug, categories}) => <div\n                    className=\"header-nav__link header-nav__link--narrow\"\n                    key={slug}>\n                    <a href={'/category/' + slug}\n                        className=\"header-nav__active-element\">\n                        {displayName || name}\n                    </a>\n                    {categories.length === 0 ?\n                        null :\n                        <div className=\"header-nav__switch-button\"\n                            onClick={() => view.switchTab(slug)}>\n                            {activeCategory && activeCategory.slug === slug ? '×' : '+'}\n                        </div>\n                    }\n                    {activeCategory && activeCategory.slug === slug && <TabContent category={activeCategory}/>}\n                </div>)\n            }\n        </div>;\n    }\n\n    render() {\n        const view = this;\n        const {state} = view;\n        const {categoryTree, isNarrow} = state;\n        const activeCategory = find(categoryTree.categories, {slug: state.activeCategorySlug});\n\n        if (isNarrow) {\n            return view.narrowRender();\n        }\n\n        return <div>\n            {categoryTree.categories\n                .sort((category1, category2) => category1.order - category2.order)\n                .map(({displayName, name, slug}) => <div\n                    className=\"header-nav__link\"\n                    onMouseEnter={() => view.openTab(slug)}\n                    onMouseLeave={() => view.closeTabs()}\n                    key={slug}>\n                    <a href={'/category/' + slug}\n                        className=\"header-nav__active-element\">\n                        {displayName || name}\n                    </a>\n                    {activeCategory && activeCategory.slug === slug && <TabContent category={activeCategory}/>}\n                </div>)\n            }\n        </div>;\n    }\n}\n\nmodule.exports.initHeaderNav = () => {\n    const wrapper = document.querySelector('.js-header-nav');\n    const {categoryTree} = window.app;\n\n    if (!wrapper || !categoryTree) {\n        return;\n    }\n\n    ReactDOM.render(\n        <HeaderNav/>,\n        wrapper\n    );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/header-nav.js","/* global document, setTimeout, location */\nconst React = require('react');\nconst ReactDOM = require('react-dom');\nconst classnames = require('classnames');\nconst {normalizeString} = require('./my-lib/format');\nconst {SearchPage} = require('./search-page');\n\nclass HeaderSearch extends SearchPage {\n    constructor() {\n        super();\n\n        const view = this;\n\n        view.state = {\n            query: '',\n            products: [],\n            isInProgress: false,\n            hasFocus: false\n        };\n    }\n\n    renderList() {\n        const view = this;\n        const {state} = view;\n        const {products, hasFocus, query} = state;\n\n        if (!hasFocus || !query) {\n            return null;\n        }\n\n        if (!products.length) {\n            return <div className=\"header-search__result-list header-search__result-list--search-empty\">\n                По запросу<span className=\"bold\"> \"{query}\" </span>ничего не найдено\n            </div>;\n        }\n\n        return <div className=\"header-search__result-list\">\n            {products.map(({slug, name, description, images}) =>\n                <a href={'/product/' + slug} className=\"header-search__result-item clear-full\"\n                    key={slug}>\n                    <div className=\"header-search__result-image\" style={{backgroundImage: 'url(' + images[0] + ')'}}/>\n                    <h4 className=\"header-search__result-name\">{name}</h4>\n                    <p className=\"header-search__result-description\">{description}</p>\n                </a>)}\n        </div>;\n    }\n\n    onFormSubmit(evt) {\n        evt.preventDefault();\n\n        const view = this;\n        const {searchInput} = view.refs;\n        const query = normalizeString(searchInput.value);\n\n        Object.assign(location, {href: '/search?query=' + query});\n    }\n\n    render() {\n        const view = this;\n        const {state} = view;\n        const {isInProgress} = state;\n\n        const searchIconClassName = classnames('header-search__icon', {\n            'header-search__icon--in-progress': isInProgress\n        });\n\n        return <form className=\"header-search\" onSubmit={evt => view.onFormSubmit(evt)}>\n            <input\n                ref=\"searchInput\"\n                className=\"header-search__input\"\n                placeholder=\"Поиск...\"\n                onInput={evt => view.onSearchInput()}\n                onFocus={() => {\n                    view.onSearchInput();\n                    view.setState({hasFocus: true});\n                }}\n                onBlur={() => setTimeout(() => view.setState({hasFocus: false}), 300)}\n            />\n            <div className={searchIconClassName}/>\n            {view.renderList()}\n        </form>;\n    }\n}\n\nmodule.exports.initHeaderSearch = () => {\n    const wrapper = document.querySelector('.js-header-search');\n\n    if (!wrapper) {\n        return;\n    }\n\n    ReactDOM.render(\n        <HeaderSearch/>,\n        wrapper\n    );\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/header-search.js","/* global fetch, setTimeout */\n\nconst emptyQuery = '';\n\nconst searchCache = {\n    [emptyQuery]: {products: []}\n};\n\nfunction search(query) {\n    if (searchCache.hasOwnProperty(query)) {\n        return new Promise(resolve => setTimeout(() => resolve(searchCache[query]), 0));\n    }\n\n    return fetch('/api/search?query=' + query)\n        .then(rawResult => rawResult.json())\n        .then(result => {\n            Object.assign(searchCache, {[query]: result});\n\n            return result;\n        });\n}\n\nmodule.exports.search = search;\n\nfunction sortProduct(products, query) {\n    return products\n        .sort((product1, product2) => {\n            const delta = product1.name.search(new RegExp(query, 'gi')) -\n                product2.name.search(new RegExp(query, 'gi'));\n\n            if (delta) {\n                return delta;\n            }\n\n            return product1.name > product2.name ? 0.5 : -0.5;\n        });\n}\n\nmodule.exports.sortProduct = sortProduct;\n\n\n\n// WEBPACK FOOTER //\n// ./js/my-lib/search.js","/* global document*/\n\nconst scrollMethods = (() => {\n    const docElem = document.documentElement;\n    let {scrollTop = 0} = docElem;\n\n    function saveScrollTop() {\n        console.log('save', docElem.scrollTop);\n        scrollTop = docElem.scrollTop;\n    }\n\n    function restoreScrollTop() {\n        console.log('restore', scrollTop);\n        docElem.scrollTop = scrollTop;\n    }\n\n    return {\n        saveScrollTop,\n        restoreScrollTop\n    };\n})();\n\n\nmodule.exports.saveScrollTop = scrollMethods.saveScrollTop;\nmodule.exports.restoreScrollTop = scrollMethods.restoreScrollTop;\n\n\n\n// WEBPACK FOOTER //\n// ./js/my-lib/screen.js"],"sourceRoot":""}