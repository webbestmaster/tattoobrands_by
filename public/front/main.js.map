{"version":3,"sources":["webpack:///./js/index.js","webpack:///./style/css/_root.scss","webpack:///./js/home.js","webpack:///./js/product.js","webpack:///./js/helper/image.js"],"names":["require","window","app","FastClick","$","homeScripts","productScripts","document","body","initSwiper","initPagination","productReview","initSwiperZoom","Swiper","module","exports","onSwiperResize","swiper","slideHeight","slideWidth","width","documentElement","clientWidth","neededHeight","Math","min","round","neededHeightPx","wrapper","container","slides","nodes","concat","forEach","Object","assign","node","style","height","homeSwiper","pagination","paginationClickable","centeredSlides","autoplay","autoplayDisableOnInteraction","loop","onInit","onAfterResize","console","log","indexPagination","totalPages","startPage","location","twbsPagination","initiateStartPageClick","visiblePages","prev","next","first","last","onPageClick","evt","page","search","on","preventDefault","productSwiperImages","productSwiperWrapper","length","addClass","Array","prototype","slice","call","map","src","then","maxHeightImage","images","sort","image0","image1","size","productSwiper","keyboardControl","product","win","fullPageClassName","onWindowResize","hasClass","removeClass","toggleClass","dispatchEvent","Event","loadImage","loadImages","Promise","resolve","reject","image","Image","onLoad","onload","onerror","onError","imageSrcList","all"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA,mBAAAA,CAAQ,CAAR;;AAEAC,OAAOC,GAAP,GAAaD,OAAOC,GAAP,IAAc,EAA3B;;AAEA,IAAMC,YAAY,mBAAAH,CAAQ,CAAR,CAAlB;AACA,IAAMI,IAAI,mBAAAJ,CAAQ,CAAR,CAAV;;AAEA,IAAMK,cAAc,mBAAAL,CAAQ,CAAR,CAApB;AACA,IAAMM,iBAAiB,mBAAAN,CAAQ,CAAR,CAAvB;;AAEAI,EAAE,YAAM;AACJ;AACA,QAAID,SAAJ,CAAcI,SAASC,IAAvB,EAFI,CAE0B;;AAE9B;AACAH,gBAAYI,UAAZ;AACAJ,gBAAYK,cAAZ;AACAL,gBAAYM,aAAZ;;AAEA;AACAL,mBAAeG,UAAf;AACAH,mBAAeM,cAAf;AACH,CAZD,E;;;;;;ACXA,yC;;;;;;;;;ACAA;AACA,IAAMC,SAAS,mBAAAb,CAAQ,CAAR,CAAf;AACA,IAAMI,IAAI,mBAAAJ,CAAQ,CAAR,CAAV;;AAEAc,OAAOC,OAAP,CAAeN,UAAf,GAA4B,YAAM;AAC9B,aAASO,cAAT,CAAwBC,MAAxB,EAAgC;AAC5B;AACA,YAAMC,cAAc,GAApB;AACA,YAAMC,aAAa,GAAnB;AACA,YAAMC,QAAQb,SAASc,eAAT,CAAyBC,WAAvC;AACA,YAAMC,eAAeC,KAAKC,GAAL,CAASD,KAAKE,KAAL,CAAWR,cAAcE,KAAd,GAAsBD,UAAjC,CAAT,EAAuDD,WAAvD,CAArB;AACA,YAAMS,iBAAiBJ,eAAe,IAAtC;;AAEA;AAR4B,YASrBK,OATqB,GASSX,MATT,CASrBW,OATqB;AAAA,YASZC,SATY,GASSZ,MATT,CASZY,SATY;AAAA,YASDC,MATC,GASSb,MATT,CASDa,MATC;;AAU5B,YAAMC,QAAQ,CAACH,OAAD,EAAUC,SAAV,EAAqBG,MAArB,CAA4BF,MAA5B,CAAd;;AAEAC,cAAME,OAAN,CAAc;AAAA,mBAAQC,OAAOC,MAAP,CAAcC,KAAKC,KAAnB,EAA0B,EAACC,QAAQX,cAAT,EAA1B,CAAR;AAAA,SAAd;AACH;;AAED,QAAMY,aAAa,IAAI1B,MAAJ,CAAW,yBAAX,EAAsC;AACrD2B,oBAAY,oBADyC;AAErD;AACA;AACAC,6BAAqB,IAJgC;AAKrD;AACAC,wBAAgB,IANqC;AAOrDC,kBAAU,IAP2C;AAQrDC,sCAA8B,KARuB;AASrDC,cAAM,IAT+C;AAUrDC,gBAAQ9B,cAV6C;AAWrD+B,uBAAe/B;AAXsC,KAAtC,CAAnB;;AAcAgC,YAAQC,GAAR,CAAY,wBAAZ,EAAsCV,UAAtC;AACH,CA/BD;;AAiCAzB,OAAOC,OAAP,CAAeL,cAAf,GAAgC,YAAM;AAAA,QAC3BwC,eAD2B,GACRjD,OAAOC,GADC,CAC3BgD,eAD2B;;;AAGlC,QAAI,CAACA,eAAL,EAAsB;AAClBF,gBAAQC,GAAR,CAAY,wBAAZ;AACA;AACH;;AANiC,QAQ3BE,UAR2B,GAQFD,eARE,CAQ3BC,UAR2B;AAAA,QAQfC,SARe,GAQFF,eARE,CAQfE,SARe;AAAA,kBASfnD,MATe;AAAA,QAS3BoD,QAT2B,WAS3BA,QAT2B;;;AAWlCjD,MAAE,sBAAF,EAA0BkD,cAA1B,CAAyC;AACrCH,8BADqC;AAErCC,4BAFqC;;AAIrCG,gCAAwB,KAJa;AAKrCC,sBAAc,CALuB;;AAOrCC,cAAM,SAP+B;AAQrCC,cAAM,SAR+B;;AAUrCC,eAAO,SAV8B;AAWrCC,cAAM,SAX+B;;AAarCC,qBAAa,qBAACC,GAAD,EAAMC,IAAN;AAAA,mBAAe7B,OAAOC,MAAP,CAAckB,QAAd,EAAwB,EAACW,QAAQ,UAAUD,IAAnB,EAAxB,CAAf;AAAA;AAbwB,KAAzC;AAeH,CA1BD;;AA4BAjD,OAAOC,OAAP,CAAeJ,aAAf,GAA+B,YAAM;AACjCP,MAAE,qBAAF,EAAyB6D,EAAzB,CAA4B,aAA5B,EAA2C;AAAA,eAAOH,IAAII,cAAJ,EAAP;AAAA,KAA3C;AACH,CAFD,C;;;;;;;;;AC7DA;;AAJA;AACA,IAAMrD,SAAS,mBAAAb,CAAQ,CAAR,CAAf;AACA,IAAMI,IAAI,mBAAAJ,CAAQ,CAAR,CAAV;;AAIAc,OAAOC,OAAP,CAAeN,UAAf,GAA4B,YAAM;AAC9B,QAAM0D,sBAAsB/D,EAAE,wBAAF,CAA5B;AACA,QAAMgE,uBAAuBhE,EAAE,4BAAF,CAA7B;;AAEA,QAAI+D,oBAAoBE,MAApB,IAA8B,CAAlC,EAAqC;AACjCD,6BAAqBE,QAArB,CAA8B,mCAA9B;AACAtB,gBAAQC,GAAR,CAAY,sCAAZ;AACA;AACH;;AAED,2BAAWsB,MAAMC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BP,mBAA3B,EAAgDQ,GAAhD,CAAoD;AAAA,YAAEC,GAAF,QAAEA,GAAF;AAAA,eAAWA,GAAX;AAAA,KAApD,CAAX,EAAgF;AAAhF,KACKC,IADL,CACU,kBAAU;AACZ,YAAMC,iBAAiBC,OAAOC,IAAP,CAAY,UAACC,MAAD,EAASC,MAAT;AAAA,mBAAoBA,OAAO5C,MAAP,GAAgB2C,OAAO3C,MAA3C;AAAA,SAAZ,EAA+D,CAA/D,CAAvB;;AAEA,iBAAStB,cAAT,CAAwBC,MAAxB,EAAgC;AAAA,gBACrBW,OADqB,GACSX,MADT,CACrBW,OADqB;AAAA,gBACZC,SADY,GACSZ,MADT,CACZY,SADY;AAAA,gBACDC,MADC,GACSb,MADT,CACDa,MADC;;AAE5B,gBAAMqD,OAAO3D,KAAKC,GAAL,CAASqD,eAAexC,MAAxB,EAAgCT,UAAUP,WAA1C,IAAyD,IAAtE;AACA,gBAAMS,QAAQ,CAACH,OAAD,EAAUC,SAAV,EAAqBG,MAArB,CAA4BF,MAA5B,CAAd;;AAEAC,kBAAME,OAAN,CAAc;AAAA,uBAAQC,OAAOC,MAAP,CAAcC,KAAKC,KAAnB,EAA0B,EAACC,QAAQ6C,IAAT,EAA1B,CAAR;AAAA,aAAd;AACH;;AAED,YAAMC,gBAAgB,IAAIvE,MAAJ,CAAWuD,qBAAqB,CAArB,CAAX,EAAoC;AACtD5B,wBAAY,oBAD0C;AAEtD;AACA;AACAC,iCAAqB,IAJiC;AAKtD;AACAC,4BAAgB,IANsC;AAOtDC,sBAAU,IAP4C;AAQtDC,0CAA8B,KARwB;AAStDC,kBAAM,IATgD;AAUtDwC,6BAAiB,IAVqC;AAWtDvC,oBAAQ9B,cAX8C;AAYtD+B,2BAAe/B;AAZuC,SAApC,CAAtB;;AAeAgC,gBAAQC,GAAR,CAAY,2BAAZ,EAAyCmC,aAAzC;AACH,KA5BL;AA6BH,CAvCD;;AAyCAtE,OAAOC,OAAP,CAAeH,cAAf,GAAgC,YAAM;AAClC,QAAM0E,UAAUlF,EAAE,aAAF,CAAhB;AACA,QAAMmF,MAAMtF,MAAZ;AACA,QAAMuF,oBAAoB,oBAA1B;;AAEA,aAASC,cAAT,GAA0B;AACtB,YAAIH,QAAQI,QAAR,CAAiBF,iBAAjB,CAAJ,EAAyC;AACrC;AACH;;AAED,YAAID,IAAIhF,QAAJ,CAAac,eAAb,CAA6BC,WAA7B,GAA2C,GAA/C,EAAoD;AAChDgE,oBAAQhB,QAAR,CAAiBkB,iBAAjB;AACA;AACH;;AAEDF,gBAAQK,WAAR,CAAoBH,iBAApB;AACH;;AAEDC;;AAEArF,MAAEmF,GAAF,EAAOtB,EAAP,CAAU,QAAV,EAAoBwB,cAApB;;AAEArF,MAAE,4BAAF,EAAgC6D,EAAhC,CAAmC,UAAnC,EAA+C,YAAM;AACjDqB,gBAAQM,WAAR,CAAoBJ,iBAApB;AACAD,YAAIM,aAAJ,CAAkB,IAAIC,KAAJ,CAAU,QAAV,CAAlB;AACH,KAHD;AAIH,CA1BD,C;;;;;;;;;;;;QC7CgBC,S,GAAAA,S;QAqBAC,U,GAAAA,U;AAvBhB;;AAEO,SAASD,SAAT,CAAmBnB,GAAnB,EAAwB;AAC3B,WAAO,IAAIqB,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,YAAMC,QAAQ,IAAIC,KAAJ,EAAd;;AAEA,iBAASC,MAAT,GAAkB;AACdF,kBAAMG,MAAN,GAAeH,MAAMI,OAAN,GAAgB,IAA/B;AACAN,oBAAQE,KAAR;AACH;;AAED,iBAASK,OAAT,GAAmB;AACfL,kBAAMG,MAAN,GAAeH,MAAMI,OAAN,GAAgB,IAA/B;AACAL,mBAAOC,KAAP;AACH;;AAEDA,cAAMG,MAAN,GAAeD,MAAf;AACAF,cAAMI,OAAN,GAAgBC,OAAhB;;AAEAL,cAAMxB,GAAN,GAAYA,GAAZ;AACH,KAjBM,CAAP;AAkBH;;AAEM,SAASoB,UAAT,CAAoBU,YAApB,EAAkC;AACrC,WAAOT,QAAQU,GAAR,CAAYD,aAAa/B,GAAb,CAAiBoB,SAAjB,CAAZ,CAAP;AACH,C","file":"main.js","sourcesContent":["/* global document */\nrequire('./../style/css/_root.scss');\n\nwindow.app = window.app || {};\n\nconst FastClick = require('fastclick');\nconst $ = require('jquery');\n\nconst homeScripts = require('./home');\nconst productScripts = require('./product');\n\n$(() => {\n    // main part\n    new FastClick(document.body); // eslint-disable-line no-new\n\n    // home\n    homeScripts.initSwiper();\n    homeScripts.initPagination();\n    homeScripts.productReview();\n\n    // product\n    productScripts.initSwiper();\n    productScripts.initSwiperZoom();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/index.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./style/css/_root.scss\n// module id = 7\n// module chunks = 0","/* global document */\nconst Swiper = require('./lib/idangerous.swiper');\nconst $ = require('jquery');\n\nmodule.exports.initSwiper = () => {\n    function onSwiperResize(swiper) {\n        // count height\n        const slideHeight = 261;\n        const slideWidth = 980;\n        const width = document.documentElement.clientWidth;\n        const neededHeight = Math.min(Math.round(slideHeight * width / slideWidth), slideHeight);\n        const neededHeightPx = neededHeight + 'px';\n\n        // get nodes\n        const {wrapper, container, slides} = swiper;\n        const nodes = [wrapper, container].concat(slides);\n\n        nodes.forEach(node => Object.assign(node.style, {height: neededHeightPx}));\n    }\n\n    const homeSwiper = new Swiper('.js-home-swiper-wrapper', {\n        pagination: '.swiper-pagination',\n        // nextButton: '.swiper-button-next',\n        // prevButton: '.swiper-button-prev',\n        paginationClickable: true,\n        // spaceBetween: 30,\n        centeredSlides: true,\n        autoplay: 6000,\n        autoplayDisableOnInteraction: false,\n        loop: true,\n        onInit: onSwiperResize,\n        onAfterResize: onSwiperResize\n    });\n\n    console.log('home swiper is here ->', homeSwiper);\n};\n\nmodule.exports.initPagination = () => {\n    const {indexPagination} = window.app;\n\n    if (!indexPagination) {\n        console.log('no app.indexPagination');\n        return;\n    }\n\n    const {totalPages, startPage} = indexPagination;\n    const {location} = window;\n\n    $('.js-index-pagination').twbsPagination({\n        totalPages,\n        startPage,\n\n        initiateStartPageClick: false,\n        visiblePages: 5,\n\n        prev: '&#8672;',\n        next: '&#8674;',\n\n        first: '&#8676;',\n        last: '&#8677;',\n\n        onPageClick: (evt, page) => Object.assign(location, {search: 'page=' + page})\n    });\n};\n\nmodule.exports.productReview = () => {\n    $('.js-product-preview').on('contextmenu', evt => evt.preventDefault());\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/home.js","/* global document, Event */\nconst Swiper = require('./lib/idangerous.swiper');\nconst $ = require('jquery');\n\nimport {loadImages} from './helper/image';\n\nmodule.exports.initSwiper = () => {\n    const productSwiperImages = $('.js-product-swiper-img');\n    const productSwiperWrapper = $('.js-product-swiper-wrapper');\n\n    if (productSwiperImages.length <= 1) {\n        productSwiperWrapper.addClass('product-swiper-wrapper--one-image');\n        console.log('no product swiper, here is one image');\n        return;\n    }\n\n    loadImages(Array.prototype.slice.call(productSwiperImages).map(({src}) => src)) // eslint-disable-line prefer-reflect\n        .then(images => {\n            const maxHeightImage = images.sort((image0, image1) => image1.height - image0.height)[0];\n\n            function onSwiperResize(swiper) {\n                const {wrapper, container, slides} = swiper;\n                const size = Math.min(maxHeightImage.height, container.clientWidth) + 'px';\n                const nodes = [wrapper, container].concat(slides);\n\n                nodes.forEach(node => Object.assign(node.style, {height: size}));\n            }\n\n            const productSwiper = new Swiper(productSwiperWrapper[0], {\n                pagination: '.swiper-pagination',\n                // nextButton: '.swiper-button-next',\n                // prevButton: '.swiper-button-prev',\n                paginationClickable: true,\n                // spaceBetween: 30,\n                centeredSlides: true,\n                autoplay: 6000,\n                autoplayDisableOnInteraction: false,\n                loop: true,\n                keyboardControl: true,\n                onInit: onSwiperResize,\n                onAfterResize: onSwiperResize\n            });\n\n            console.log('product swiper is here ->', productSwiper);\n        });\n};\n\nmodule.exports.initSwiperZoom = () => {\n    const product = $('.js-product');\n    const win = window;\n    const fullPageClassName = 'product--full-page';\n\n    function onWindowResize() {\n        if (product.hasClass(fullPageClassName)) {\n            return;\n        }\n\n        if (win.document.documentElement.clientWidth < 980) {\n            product.addClass(fullPageClassName);\n            return;\n        }\n\n        product.removeClass(fullPageClassName);\n    }\n\n    onWindowResize();\n\n    $(win).on('resize', onWindowResize);\n\n    $('.js-product-swiper-wrapper').on('dblclick', () => {\n        product.toggleClass(fullPageClassName);\n        win.dispatchEvent(new Event('resize'));\n    });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./js/product.js","/* global Image */\n\nexport function loadImage(src) {\n    return new Promise((resolve, reject) => {\n        const image = new Image();\n\n        function onLoad() {\n            image.onload = image.onerror = null;\n            resolve(image);\n        }\n\n        function onError() {\n            image.onload = image.onerror = null;\n            reject(image);\n        }\n\n        image.onload = onLoad;\n        image.onerror = onError;\n\n        image.src = src;\n    });\n}\n\nexport function loadImages(imageSrcList) {\n    return Promise.all(imageSrcList.map(loadImage));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/helper/image.js"],"sourceRoot":""}