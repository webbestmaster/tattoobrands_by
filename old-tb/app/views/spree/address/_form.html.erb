<% address_id = address_type.chars.first %>

<div class="main-form-double float-left js-checkout-form">

  <%= form.label :firstname, class: 'main-form-group-wrapper main-form-group-wrapper-required' do %>
    <span class="main-form-input-name"><%= Spree.t(:first_name) %></span>
    <%= form.text_field :firstname, :class => 'main-form-input', :placeholder => Spree.t(:first_name), :required => "required" %>
  <% end %>

  <%= form.label :lastname, class: 'main-form-group-wrapper main-form-group-wrapper-required' do %>
    <span class="main-form-input-name"><%= Spree.t(:last_name) %></span>
    <%= form.text_field :lastname, :class => 'main-form-input', :placeholder => Spree.t(:last_name), :required => "required" %>
  <% end %>

  <%= form.label :address1, class: 'main-form-group-wrapper main-form-group-wrapper-required' do %>
    <span class="main-form-input-name"><%= Spree.t(:street_address) %></span>
    <%= form.text_field :address1, :class => 'main-form-input', :placeholder => Spree.t(:street_address), :required => "required" %>
  <% end %>

  <%= form.label :address2, class: 'main-form-group-wrapper' do %>
    <span class="main-form-input-name"><%= Spree.t(:street_address_2) %></span>
    <%= form.text_field :address2, :class => 'main-form-input', :placeholder => Spree.t(:street_address_2) %>
  <% end %>

  <label class="main-form-group-wrapper main-form-group-wrapper-required main-form-group-wrapper-disabled" id=<%="#{address_id}country" %>>
    <span class="main-form-input-name"><%= Spree.t(:country) %></span>
    <span id=<%="#{address_id}country-selection" %>>
    <%= form.collection_select :country_id, available_countries, :id, :name, {}, :class => 'main-form-select js-form-select-country', :required => "required" %>
    </span>
    <!--<span class="main-form-select-arrow"></span>-->
  </label>

  <script class="js-remove-me select-country" type="text/javascript">
        $('.js-form-select-country').val(36).on('focus', function () {
            $(this).blur();
        });
  </script>

  <% if Spree::Config[:address_requires_state] %>
    <label class="main-form-group-wrapper main-form-group-wrapper-required" id=<%="#{address_id}state" %>>
      <% have_states = !address.country.states.empty? %>
      <span class="main-form-input-name"><%= Spree.t(:state) %></span>
      <% state_elements = [
         form.collection_select(:state_id, address.country.states,
                            :id, :name,
                            {:include_blank => true},
                            {:class => have_states ? 'main-form-select form-control required' : 'form-control hidden',
                            :disabled => !have_states}) +
         form.text_field(:state_name,
                            :class => !have_states ? 'main-form-select form-control required' : 'form-control hidden',
                            :disabled => have_states)
         ].join.gsub('"', "'").gsub("\n", "")
      %>

      <%= javascript_tag do %>$('#<%="#{address_id}state" %>').append("<%== state_elements %>");<% end %>
      <span class="main-form-select-arrow"></span>
    </label>
  <% end %>

  <%= form.label :city, class: 'main-form-group-wrapper main-form-group-wrapper-required' do %>
    <span class="main-form-input-name"><%= Spree.t(:city) %></span>
    <%= form.text_field :city, :class => 'main-form-input', :placeholder => Spree.t(:city), :required => "required" %>
  <% end %>

  <label class="main-form-group-wrapper<% if address.require_zipcode? %> main-form-group-wrapper-required<% end %>" id=<%="#{address_id}zipcode" %>>
    <span class="main-form-input-name"><%= Spree.t(:zip) %></span>
    <%= form.text_field :zipcode, :class => 'main-form-input', :placeholder => Spree.t(:zip), :required => "required", :pattern => "^[\\d]{6}$", :title => "Введите правильный индекс" %>
  </label>

  <label class="main-form-group-wrapper<% if address.require_phone? %> main-form-group-wrapper-required<% end %>" id=<%="#{address_id}phone" %>>
    <span class="main-form-input-name"><%= Spree.t(:phone) %></span>
    <%= form.text_field :phone, :class => 'main-form-input', :placeholder => Spree.t(:phone), :required => "required" %>
  </label>

</div>
